FORMAT: 1A
HOST: https://flarecms.acurian.com//api/Flare/v1

# Flare CMS API

API for communicating with the Flare CMS (which then may communicate with the Acurian Services (A.S.).
object, array, enum, string, boolean, number
https://github.com/apiaryio/mson
https://help.apiary.io/
https://help.apiary.io/api_101/mson-tutorial/
https://github.com/apiaryio/api-blueprint/blob/master/API%20Blueprint%20Specification.md

# Group Initial important W.S. calls (registration/login/etc)

## /appLaunch
### App Launch [POST]

On the app launch (could be 1st launch, and every subsequent launch)
Note: only return the pre-login keys for themes/translations here.
Note: based on the app and version, we can figure out the prelogin Translation keys
Note: on the 1st launch they won't send up device id, but subsequent launch will (hence how you will know if need to create a device-id or not). 
Note: check to see if the FCM token has changed for this device-id

Question: Should this WS have authentication like Basic since it doesnt have JWT Auth? (should the other ws requests which do have JWT Auth also have Basic Auth?). Answer: Sampad said that all W.S. should have Basic for ws auth, and we can use the JWT for user auth on WS that need them
Question: Which FCM Topic registrations should happen here? (Answer: os, locale, app, version). I am fine moving these generic ones (along with the patient/study-specific topics) into /register if you want to do them in 1 place.

Please call cms_version of apis for all web services. for example if default is not sent up, try to match up to a version. For now maybe we can always assume default() method?
function register($cms_version){
    if($cms_version=='default' || isDefault($cms_version) ) { register_default(); }
    else if($cms_version!='default' || versionMatchInDB($cms_version) && functionExists('register_'. $cms_version) ) { register$cms_version(); } 
    else { register_default(); } //no match
}
function register_default(){
  register_v1(); //whats the default cms version
}
function register_v1(){
  doStuff for V1...
}
function register_v2(){ //in future this may exist
  doStuff for V2...
}

+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere

    + Attributes
        + OS (string) - android or ios or (web)
        + locale (string, optional) - assume 'en' (or 'en_US') if none passed
        + fcm_token (string) - mobile app will give us an FCM Token to register for that device
        + app_name (string) - machine name of app like 'default_flare_app' or 'pfizer_flare_app'
        + app_version (string) - examples: 'v1' or 'v1.5' or 'v2' 'v2.2' (do they want to just match on regex for example: 'v1\.1.*' and/or multiple versioning overrides per OS )
        + cms_version (string) - 'default' or 'v2', which pretend would correspond with login() and login_v2() respectively in the cms
        + device_id (string, optional) - *** provide if already gotton on app's 1st launch (response won't issue a new device_id, if one already passed up)
        + app_last_updated_date (string, optional) - *** needs to get the latest info so supply on subsequent launches... optional since we'll know if its empty string or missing to view this also as very first launch and all keys should be in inserts array
        + preferred_screen_density - *** not sure if will be used yet *** android_mdpi, ios_1x, original (possibly for Badge and Avatar urls or i pass all urls and mobile-app can decide which one to use)
        + theme_id             (number, optional) - (very first time, nothing is passed) in case pre-login theme totally changed for app,             pass back everything for new theme in inserts array otherwise do normal inserts/updates/deletes check within the theme
        + translation_group_id (number, optional) - (very first time, nothing is passed) in case pre-login translation-group totally changed for app, pass back everything for new translation-group in inserts array otherwise do normal inserts/updates/deletes check within the translation-group
    
    + Body
    
            {
                "OS": "android",
                "locale": "en_US",
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default",
                "device_id": "abc123def456ghi7890jklmnopqrstuv",
                "app_last_updated_date": "2017-05-01 23:00:00",
                "preferred_screen_density": "android_mdpi",
                "theme_id": 1,
                "translation_group_id": 2
            }
    
+ Response 200 (application/json)

    + Attributes
        + request_status (RequestStatusObject)
        + cms_data (object)
            + is_app_upgrade_needed: (boolean) - if true, then mobile app will block app usage and ask to upgrade app (or provide direct link to upgrade). maybe just /appLaunch?
            + cms_app_last_updated_date (string)
            + device_id (string)
            + theme_info (object) - return prelogin theme keys only!
                + theme_id
                + theme_name (string)
                + is_inherited (boolean)
                + inherited_theme_id (number) - doesn't show up if is_inherited is false
                + inherited_theme_name (string) - doesn't show up if is_inherited is false
                + theme_values (object)
                    + inserts (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + updates (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + deletes (array[TranslationOrThemeKeyValueDeleteObject])
            + translation_info (object) - return prelogin theme keys only!
                + translation_group_id (number) - adding this in case want a quick check later on
                + translation_group_name (string)
                + is_inherited  (boolean)
                + inherited_translation_group_id (number) - doesn't show up if is_inherited is false
                + inherited_translation_group_name (string) - doesn't show up if is_inherited is false
                + translation_locale_key (string) - //pretend we send up en_AU but only en is available, i return the locale/lang/country info so app knows which locale or lang we got it from.
                + translation_language (object)
                    + lang_code (string)
                    + lang_desc (string)
                + translation_country (object)
                    + country_code (string) - might be null if we using default en translation pretend
                    + country_desc (string) - might be null if we using default en translation pretend
                + translation_values (object)
                    + inserts (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + updates (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + deletes (array[TranslationOrThemeKeyValueDeleteObject])
                
    + Body
        
            {
              "request_status": {
                "status": "success"
              },
              "cms_data": {
                "is_app_upgrade_needed": false,
                "cms_app_last_updated_date": "2017-01-10 23:45:12",
                "device_id": "abc123def456ghi7890jklmnopqrstuv",
                "theme_info":
                  {
                      "theme_id": 2,
                      "theme_name": "Theme AAA",
                      "is_inherited": true,
                      "inherited_theme_id": 2,
                      "inherited_theme_name": "Theme A",
                      "theme_values":
                      { 
                        "inserts": [
                            { "key": "app_background_color", "value":  "#FFFFFF", "type": "color_picker", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            { "key": "app_heading_color",    "value":  "#000000", "type": "color_picker", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            { "key": "app_button_color",     "value":  "#0000FF", "type": "color_picker", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            
                            -- note: for Image types below, 
                            -- *** if its a high rez image, we will just serve that key and that high-rez image's url, like 1st example below
                            { "key": "app_background_image",                 "value": "https://www.acurianhealth.com/tests/flare_app/default_background.png",         "type": "image", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00",  },
                            -- *** if its a zip file uploaded with multiple images per 1 key (_android_hdpi, _ios_1x, etc), then we will APPEND/POSTFIX the resolution to the key to keep it unique... then filter out the 7 or so keys that dont apply to your screen_density
                            { "key": "app_background_image_ios_1x",          "value": "https://www.acurianhealth.com/tests/flare_app/ios_background_1x.png",          "type": "image", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            { "key": "app_background_image_ios_2x",          "value": "https://www.acurianhealth.com/tests/flare_app/ios_background_2x.png",          "type": "image", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            { "key": "app_background_image_ios_3x",          "value": "https://www.acurianhealth.com/tests/flare_app/ios_background_3x.png",          "type": "image", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            { "key": "app_background_image_android_mdpi",    "value": "https://www.acurianhealth.com/tests/flare_app/android_background_mdpi.png",    "type": "image", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            { "key": "app_background_image_android_hdpi",    "value": "https://www.acurianhealth.com/tests/flare_app/android_background_hdpi.png",    "type": "image", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            { "key": "app_background_image_android_xhdpi",   "value": "https://www.acurianhealth.com/tests/flare_app/android_background_xhdpi.png",   "type": "image", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            { "key": "app_background_image_android_xxhdpi",  "value": "https://www.acurianhealth.com/tests/flare_app/android_background_xxhdpi.png",  "type": "image", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            { "key": "app_background_image_android_xxxhdpi", "value": "https://www.acurianhealth.com/tests/flare_app/android_background_xxxhdpi.png", "type": "image", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                    
                            { "key": "app_background_image_alt", "value":    "https://www.acurianhealth.com/tests/flare_app/default_background_alt.png",       "type": "image", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            
                            { "key": "app_android_font_alt", "value":    "https://www.acurianhealth.com/tests/flare_app/Arial.ttf",          "type": "image", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            { "key": "app_ios_font_alt",     "value":    "https://www.acurianhealth.com/tests/flare_app/ArialIOS.ttf",       "type": "image", "os": "ios",     "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            
                            { "key": "app_heading_size", "value":  "large",                     "type": "size",          "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            
                            { "key": "app_heading_android_custom_text", "value":  "Arial",      "type": "custom_text",   "os": "android",   "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                            { "key": "app_heading_ios_custom_text",     "value":  "ArialIOS",   "type": "custom_text",   "os": "ios",       "pre_login": true, "inserted_date": "2017-05-01 12:00:00" }
                        ], 
                        "updates": [
                            { "key": "test_update_key1", "value":  "large",                     "type": "size",          "os": "android", "pre_login": true, "updated_date": "2017-05-01 12:00:00" },
                            { "key": "test_update_key2", "value":  "large",                     "type": "size",          "os": "android", "pre_login": true, "updated_date": "2017-05-01 12:00:00" }
                        ], 
                        "deletes": [
                            {"key":"test_delete_key1", "deleted_date": "2017-05-01 12:00:00"},
                            {"key":"test_delete_key2", "deleted_date": "2017-05-01 12:00:00"}
                        ]
                      }
                },
                "translation_info": {
                  "translation_group_id": 1,
                  "translation_group_name": "Default Flare App translations",
                  "translation_locale_key": "en_US",
                  "translation_language": {
                    "lang_code": "en",
                    "lang_desc": "English"
                  },
                  "translation_country": {
                    "country_code": "US",
                    "country_desc": "United States"
                  },
                  "translation_values": {
                    "inserts": [
                        {"key":"Welcome_mainTitle",           "value":"FLARE STUDY",         "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Welcome_subTitle",            "value":"Welcome!",            "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Welcome_subText",             "value":"Signup using your online screener registration information", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Welcome_termsConditionsText", "value":"Terms and Condition", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Welcome_privaryPolicy",       "value":"Privacy Policy",      "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Welcome_registerButton",      "value":"Register",            "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        
                        {"key":"Registration_title",              "value":"New User Registration", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Registration_name",               "value":"Name",             "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Registration_username",           "value":"Username",         "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Registration_password",           "value":"Password",         "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Registration_email",              "value":"Email Id",         "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Registration_phone",              "value":"Phone Number",     "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Registration_registrationKey",    "value":"Registration Key", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Registration_registrationButton", "value":"Register",         "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"RegistrationDialog_title",        "value":"Congratulations",  "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"RegistrationDialog_description",  "value":"You have successfully registered", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"RegistrationDialog_okay",         "value":"Okay",             "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        
                        {"key":"Login_mainTitle",          "value":"FLARE STUDY",               "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Login_password",           "value":"Password",                  "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Login_username",           "value":"Username",                  "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Login_authenticateButton", "value":"LOGIN",                     "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Login_registerButton",     "value":"NEW USER Registration",     "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Login_forgotPassword",     "value":"Forgot your password?",     "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Login_resetText",          "value":"Reset it",                  "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        
                        {"key":"Home_title",                         "value":"Flare Study",     "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Home_rewardsText",                   "value":"Reward Points",   "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Home_flareStatusText",               "value":"Flare Status",    "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Home_lastSiteVisitText",             "value":"Last Site Visit", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Home_flareNotVerifiedStatus",        "value":"Not Verified",    "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Home_flareReported",                 "value":"Flares Reported", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Home_siteVisits",                    "value":"Site Visits",     "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Home_FlareDetectionDiaglo_title",    "value":"FLARE DETECTED",  "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Home_FlareDetectionDialog_contactDetailsText", "value":"Please contact site at", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        
                        {"key":"SurveyDecisionScreen_title", "value":"How are you feeling?", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"SurveyDecisionScreen_ok",    "value":"Ok",                   "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"SurveyDecisionScreen_notOk", "value":"Not Ok",               "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        
                        {"key":"Drawer_userName",          "value":"John Smith",     "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Drawer_profileText",       "value":"My Profile",     "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Drawer_homeMenu",          "value":"Home",           "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Drawer_notificationsMenu", "value":"Notifications",  "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Drawer_studyMaterialMenu", "value":"Study Material", "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Drawer_siteDetailsMenu",   "value":"Contact Site",   "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Drawer_settingsMenu",      "value":"Settings",       "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" },
                        {"key":"Drawer_logoutMenu",        "value":"Logout",         "os": "android", "pre_login": true, "inserted_date": "2017-05-01 12:00:00" }
                    ],
                    "updates": [
                        {"key":"test_update_key1",        "value":"Logout",         "os": "android", "pre_login": true, "updated_date": "2017-05-01 12:00:00" },
                        {"key":"test_update_key2",        "value":"Logout",         "os": "android", "pre_login": true, "updated_date": "2017-05-01 12:00:00" }
                    ], 
                    "deletes": [
                        {"key":"test_delete_key1", "deleted_date": "2017-05-01 12:00:00"},
                        {"key":"test_delete_key2", "deleted_date": "2017-05-01 12:00:00"}
                    ]
                    
                  }
                }
               },
               "acurian_services_data": {}
            }


## /validateFlareActivationKey
### Validate Flare Activation/Registration Key [POST]

Note: should call /validateFlareRegistrationKey AS service
The next call /register call should confirm its the same patient id I heard.
Note: about app_last_updated_date being passed here: I know its passed in payload in case i need it... But mobile-app shouldn't update the app_last_updated date, i don't think this request should return cms_data
Note: the response can be something like: RegistrationKeyValidation: "EXPIRED" or 

+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere

    + Attributes
        + OS (string) - android or ios or (web)
        + locale (string, optional) - assume 'en' (or 'en_US') if none passed
        + fcm_token (string) - mobile app will give us an FCM Token to register for that device
        + app_name (string) - machine name of app like 'default_flare_app' or 'pfizer_flare_app'
        + app_version (string) - examples: 'v1' or 'v1.5' or 'v2' 'v2.2' (do they want to just match on regex for example: 'v1\.1.*' and/or multiple versioning overrides per OS )
        + cms_version (string) - 'default' or 'v2', which pretend would correspond with login() and login_v2() respectively in the cms
        + device_id (string, optional) - provide if already gotton on app's 1st launch (response won't issue a new device_id, if one already passed up)
        + app_last_updated_date (string, optional) - needs to get the latest info so supply on subsequent launches
        + preferred_screen_density - *** not sure if will be used yet *** android_mdpi, ios_1x, original (possibly for Badge and Avatar urls or i pass all urls and mobile-app can decide which one to use)
        + registration_key - *** is there something else that can be used if they dont have activation key?
    
    + Body
    
            {
                "OS": "android",
                "locale": "en_US",
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default",                
                "device_id": "abc123def456ghi7890jklmnopqrstuv",
                "app_last_updated_date": "2017-05-01 23:00:00",
                
                "registration_key": "LMYLF6"
            }

+ Response 200 (application/json)

    + Attributes
        + request_status (RequestStatusObject)
        + cms_data - empty
        + acurian_services_data
        
    + Body

            {
              "request_status": {
                "status": "success"
              },
              "cms_data": {},
              "acurian_services_data": {
                apiResponse: {
                  RegistrationKeyValidation: "VALID_AND_AVAILABLE_FOR_REGISTRATION"
                },
                apiErrors: [{
                    code: 200,
                    status: "OK",
                    message: "Registration key is valid and available for registration",
                    moreInfo: "Registration key is valid and available for registration",
                    httpStatus: "OK",
                    versionInfo: "Supported"
                  }
                ]
              }  
            }
            

## /resetFlareUserRegistrationKey
### Reset (and possibly Generate) Flare Patient Registration Key  [POST]

Note: should call /sendFlareRegKeyResetLink (which in turn will call /resetFlareUserRegKey from clicking the email link) AS service (note: this used to be called old /resetFlareUserRegistrationKey WS directly which is incorrect)
Some of these params below aren't needed but for now we agreed to always accept if they are available and sent up from the mobile-app (OS till app_last_updated_date for example)

+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere

    + Attributes
        + OS (string) - 
        + locale (string, optional) - 
        + fcm_token (string) - 
        + app_name (string) - 
        + app_version (string) - 
        + cms_version (string) - 
        + device_id (string, optional) - 
        + app_last_updated_date (string, optional) - 
        + email (required)

    + Body 

            {
                "OS": "android",
                "locale": "en_US",
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default",                
                "device_id": "abc123def456ghi7890jklmnopqrstuv",
                "app_last_updated_date": "2017-05-01 23:00:00",
                
                "email":"sample@acurian.com",
            }

    
+ Response 200 (application/json)
    
    + Attributes
        + request_status (RequestStatusObject)
        + cms_data - empty
        + acurian_services_data
        
    + Body

            {
                "request_status": {
                    "status": "success"
                },
                "cms_data": {},
                "acurian_services_data": {
                    apiResponse: {
                        uniqueId: "7JT2U8"
                    },
                    apiErrors: [
                        {
                            code: 200,
                            status: "Success",
                            message: "Success",
                            moreInfo: "Success",
                            httpStatus: "OK",
                            versionInfo: "Supported"
                        }
                    ]
                }
            }

+ Response 409 (application/json)

    + Attributes
        + request_status (RequestStatusObject)
        + cms_data - empty
        + acurian_services_data

    + Body

            {
                "request_status": {
                    "status": "error",
                    "errors": [ {
                            "error_source": "acurian_services_error",
                            "error_code": "PATIENT_ALREADY_REGISTERED_EXCEPTION_EXAMPLE",
                            "error_message": "Patient already registered"
                        }
                    ] 
                },
                "cms_data": {},
                "acurian_services_data": {
                    apiResponse: {
                        patientInfo: {
                            flareUserId: 0,
                            emailId: "sample@acurian.com",
                            phoneNumber: "123-456-7890",
                            password: null,
                            registrationKey: null,
                            languagePref: null,
                            studyId: -1,
                            textPref: null,
                            phonePref: null,
                            emailPref: null,
                            surveyFreq: null,
                            notifFreq: null,
                            patientId: 0,
                            oldPassword: null,
                            newPassword: null,
                            status: null,
                            firstName: "Acurian",
                            lastName: "Trial",
                            projectCode: null,
                            registrationKeyExpired: null,
                            site: null,
                            metaData: null,
                            dob: "26-03-1973",
                            zipCode: "19044",
                            streetAddress: "Street 12"
                        }
                    },
                    apiErrors: [{
                        code: 409,
                        status: "PATIENT_ALREADY_REGISTERED_EXCEPTION_EXAMPLE",
                        message: "Patient already registered",
                        moreInfo: "Patient already registered",
                        httpStatus: "OK",
                        versionInfo: "Supported"
                    }]
                }
            }

## /register
### Register [POST]

Note: should call /registerFlareUser AS service and /getFlareSurvey AS service for the 2 objects under acurian_services_data
Note: similar to how we filtered theme/translation keys for pre-login keys for /appLaunch, make sure to filter theme/translation keys for post-login keys for /register
upon registration (after validating the token which happens separately)
Question: should we issue a jwt token to auto-login you in here, or call /login or /authorization after?: Answer: we should issue a jwt token and call AS /authorize with the same user/password so they can see that someone 'logged in' (their AS register doesn't do this)
Note: subscribe to FCM topics here as needed.
Note: create a good patient schema here since we'll have the flare_user_id and things to related to it like device_id, fcm_token, etc.

+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere

    + Attributes
        + OS (string) - android or ios or (web)
        + locale (string, optional) - assume 'en' (or 'en_US') if none passed
        + fcm_token (string) - mobile app will give us an FCM Token to register for that device
        + app_name (string) - machine name of app like 'default_flare_app' or 'pfizer_flare_app'
        + app_version (string) - examples: 'v1' or 'v1.5' or 'v2' 'v2.2' (do they want to just match on regex for example: 'v1\.1.*' and/or multiple versioning overrides per OS )
        + cms_version (string) - 'default' or 'v2', which pretend would correspond with login() and login_v2() respectively in the cms
        + device_id (string) - provide since already done on app 1st launch
        + app_last_updated_date (string) - needs to get the latest info
        + preferred_screen_density - *** not sure if will be used yet *** android_mdpi, ios_1x, original (possibly for Badge and Avatar urls or i pass all urls and mobile-app can decide which one to use)
        + activation_key - *** is there something else that can be used if they dont have activation key?
        + email (string, required) - *** email from 
        + password (string, optional) - *** Note: any password inputs I believe will always be md5-ed be4 they get to us
    
    + Body
    
            {
                "OS": "android",
                "locale": "en_US",
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default"
                "device_id": "def124",
                "app_last_updated_date": "2017-05-01 23:00:00",
                "preferred_screen_density": "android_mdpi",
                "activation_key": "usertypingsomething",
                "email": "test@hotmail.com",
                "phone_number": "abc1234",
                "password": "md5(password@2!$test)"
            }
    
+ Response 200 (application/json)

    + Attributes
        + request_status (RequestStatusObject)
        + cms_data (object)
            + cms_app_last_updated_date (string) -
            + jwt_token (string) - hmmm so if we can't call our own /login since it will return data as if you logged in for 1st time, then we have to call AS's login directly and get the jwt token here (also will issue one if user logs out and has to do a CMS /login)
            + theme_info (object) - filter post-login theme keys only!
                + theme_id
                + theme_name (string)
                + is_inherited (boolean)
                + inherited_theme_id (number) - doesn't show up if is_inherited is false
                + inherited_theme_name (string) - doesn't show up if is_inherited is false
                + theme_values (object)
                    + inserts (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + updates (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + deletes (array[TranslationOrThemeKeyValueDeleteObject])
            + translation_info (object) - filter post-login translation keys only!
                + translation_group_id (number) - adding this in case want a quick check later on
                + translation_group_name (string)
                + is_inherited  (boolean)
                + inherited_translation_group_id (number) - doesn't show up if is_inherited is false
                + inherited_translation_group_name (string) - doesn't show up if is_inherited is false
                + translation_locale_key (string) - //pretend we send up en_AU but only en is available, i return the locale/lang/country info so app knows which locale or lang we got it from.
                + translation_language (object)
                    + lang_code (string)
                    + lang_desc (string)
                + translation_country (object)
                    + country_code (string) - might be null if we using default en translation pretend
                    + country_desc (string) - might be null if we using default en translation pretend
                + translation_values (object)
                    + inserts (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + updates (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + deletes (array[TranslationOrThemeKeyValueDeleteObject])
            + study_materials
                + inserts (array[AppMaterialOrStudyMaterialInsertOrUpdateObject])
                + updates (array[AppMaterialOrStudyMaterialInsertOrUpdateObject])
                + deletes (array[AppMaterialOrStudyMaterialDeleteObject])
            + app_materials
                + inserts (array[AppMaterialOrStudyMaterialInsertOrUpdateObject])
                + updates (array[AppMaterialOrStudyMaterialInsertOrUpdateObject])
                + deletes (array[AppMaterialOrStudyMaterialDeleteObject])
            + avatars
                + avatar_group_id (number)
                + avatar_group_name (string)
                + fallback_translation_key_avatar_awarded (string) - lookup can fail
                + fallback_translation_key_avatar_achieve_title (string)  - lookup can fail
                + fallback_translation_key_avatar_achieve_body (string) - lookup can fail
                + inserts (array[AvatarInsertOrUpdateObject])
                + updates (array[AvatarInsertOrUpdateObject])
                + deletes (array[AvatarOrBadgeDeleteObject])
            + badges
                + badge_group_id (number)
                + badge_group_name (string)
                + fallback_translation_key_badge_awarded (string) - could be empty too
                + fallback_translation_key_badge_achieve_title (string) - could be empty too
                + fallback_translation_key_badge_achieve_body (string) - could be empty too
                + inserts (array[BadgeInsertOrUpdateObject])
                + updates (array[BadgeInsertOrUpdateObject])
                + deletes (array[AvatarOrBadgeDeleteObject])
            + app_info
                + latency_minutes (number) - this can probably be moved into study_info but im not very picky on this since its a true app configuration vs study... maybe we want to add more things in the future to the app_info
            + study_info
                + study_id (number) - already in the 
                + project_code (string)
                + cms_study_id (number)
                + avatar_trigger (string) - for now we only have 1 type of trigger, so using string for now. later we maybe have an id from the dropdown
                + badge_trigger (string) - for now we only have 1 type of trigger, so using string for now. later we maybe have an id from the dropdown
                + number_hours_maintain_streak_data (number)
                + allow_user_to_take_survey_if_in_flare (boolean)
                + allow_gain_avatars_offline (boolean)
                + allow_gain_badges_offline (boolean)
                + allow_gain_same_badge_multiple_times (boolean)
                + show_baseline_after_register (boolean)
                + show_non_baseline_after_register (boolean)
                + show_baseline_in_survey (boolean)
                + editable_baseline_in_survey (boolean)
                + show_baseline_link_in_settings (boolean)
                + spectrum_graph_colors (array[SpectrumColorObject]) - hardcoded for now, we will make a CMS page later to collect this info which will build the spectrum graph dynamically
                + patient_profile_score
                    + patient_profile_score_formula (string)
                    + patient_profile_score_mapping (array[PatientProfileScoreMappingObject])
                + question_color_image_mapping
                    + questions (array[QuestionColorImageMappingObject])
        + acurian_services_data (object)
            + patient_info (object) - pull this data from the AS service: POST /registerFlareUser (params: emailID, phoneNumber, password, registrationKey, languagePref ... correspond to our values: email, phone_number, password, activation_key, locale)
            + survey_info (object)  - pull this data from the AS service: GET /getFlareSurvey
        
    + Body

            {
                "request_status": {
                    "status": "success"
                },
                "cms_data": {
                    "cms_app_last_updated_date": "2017-01-10 23:45:12",
                    "jwt_token": "def456...",
                    "theme_info": {
                        "theme_id": 2,
                        "theme_name": "Theme AAA",
                        "is_inherited": true,
                        "inherited_theme_id": 2,
                        "inherited_theme_name": "Theme A",
                        "theme_values": {
                            "inserts": [{
                                    "key": "app_background_color",
                                    "value": "#FFFFFF",
                                    "type": "color_picker",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_heading_color",
                                    "value": "#000000",
                                    "type": "color_picker",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_button_color",
                                    "value": "#0000FF",
                                    "type": "color_picker",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_background_image",
                                    "value": "https://www.acurianhealth.com/tests/flare_app/default_background.png",
                                    "type": "image",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_background_image_iOS_1x",
                                    "value": "https://www.acurianhealth.com/tests/flare_app/ios_background_1x.png",
                                    "type": "image",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_background_image_iOS_2x",
                                    "value": "https://www.acurianhealth.com/tests/flare_app/ios_background_2x.png",
                                    "type": "image",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_background_image_iOS_3x",
                                    "value": "https://www.acurianhealth.com/tests/flare_app/ios_background_3x.png",
                                    "type": "image",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_background_image_android_mdpi",
                                    "value": "https://www.acurianhealth.com/tests/flare_app/android_background_mdpi.png",
                                    "type": "image",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_background_image_android_hdpi",
                                    "value": "https://www.acurianhealth.com/tests/flare_app/android_background_hdpi.png",
                                    "type": "image",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_background_image_android_xhdpi",
                                    "value": "https://www.acurianhealth.com/tests/flare_app/android_background_xhdpi.png",
                                    "type": "image",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_background_image_android_xxhdpi",
                                    "value": "https://www.acurianhealth.com/tests/flare_app/android_background_xxhdpi.png",
                                    "type": "image",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_background_image_android_xxxhdpi",
                                    "value": "https://www.acurianhealth.com/tests/flare_app/android_background_xxxhdpi.png",
                                    "type": "image",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_background_image_alt",
                                    "value": "https://www.acurianhealth.com/tests/flare_app/default_background_alt.png",
                                    "type": "image",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                },
                                {
                                    "key": "app_android_font_alt",
                                    "value": "https://www.acurianhealth.com/tests/flare_app/Arial.ttf",
                                    "type": "file",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_ios_font_alt",
                                    "value": "https://www.acurianhealth.com/tests/flare_app/ArialIOS.ttf",
                                    "type": "file",
                                    "os": "ios",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                },
                                {
                                    "key": "app_heading_size",
                                    "value": "large",
                                    "type": "size",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_heading_android_custom_text",
                                    "value": "Arial",
                                    "type": "custom_text",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "app_heading_ios_custom_text",
                                    "value": "ArialIOS",
                                    "type": "custom_text",
                                    "os": "ios",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }
                            ],
                            "updates": [{
                                    "key": "test_update_key1",
                                    "value": "large",
                                    "type": "size",
                                    "os": "android",
                                    "pre_login": true,
                                    "updated_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "test_update_key2",
                                    "value": "large",
                                    "type": "size",
                                    "os": "android",
                                    "pre_login": true,
                                    "updated_date": "2017-05-01 12:00:00"
                                }
                            ],
                            "deletes": [{
                                    "key": "test_delete_key1",
                                    "deleted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "test_delete_key2",
                                    "deleted_date": "2017-05-01 12:00:00"
                                }
                            ]
                        }
                    },
                    "translation_info": {
                        "translation_group_id": 1,
                        "translation_group_name": "Default Flare App translations",
                        "translation_locale_key": "en_US",
                        "translation_language": {
                            "lang_code": "en",
                            "lang_desc": "English"
                        },
                        "translation_country": {
                            "country_code": "US",
                            "country_desc": "United States"
                        },
                        "translation_values": {
                            "inserts": [{
                                    "key": "Welcome_mainTitle",
                                    "value": "FLARE STUDY",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Welcome_subTitle",
                                    "value": "Welcome!",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Welcome_subText",
                                    "value": "Signup using your online screener registration information",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Welcome_termsConditionsText",
                                    "value": "Terms and Condition",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Welcome_privaryPolicy",
                                    "value": "Privacy Policy",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Welcome_registerButton",
                                    "value": "Register",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Registration_title",
                                    "value": "New User Registration",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Registration_name",
                                    "value": "Name",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Registration_username",
                                    "value": "Username",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Registration_password",
                                    "value": "Password",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Registration_email",
                                    "value": "Email Id",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Registration_phone",
                                    "value": "Phone Number",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Registration_registrationKey",
                                    "value": "Registration Key",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Registration_registrationButton",
                                    "value": "Register",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "RegistrationDialog_title",
                                    "value": "Congratulations",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "RegistrationDialog_description",
                                    "value": "You have successfully registered",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "RegistrationDialog_okay",
                                    "value": "Okay",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Login_mainTitle",
                                    "value": "FLARE STUDY",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Login_password",
                                    "value": "Password",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Login_username",
                                    "value": "Username",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Login_authenticateButton",
                                    "value": "LOGIN",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Login_registerButton",
                                    "value": "NEW USER Registration",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Login_forgotPassword",
                                    "value": "Forgot your password?",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Login_resetText",
                                    "value": "Reset it",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Home_title",
                                    "value": "Flare Study",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Home_rewardsText",
                                    "value": "Reward Points",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Home_flareStatusText",
                                    "value": "Flare Status",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Home_lastSiteVisitText",
                                    "value": "Last Site Visit",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Home_flareNotVerifiedStatus",
                                    "value": "Not Verified",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Home_flareReported",
                                    "value": "Flares Reported",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Home_siteVisits",
                                    "value": "Site Visits",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Home_FlareDetectionDiaglo_title",
                                    "value": "FLARE DETECTED",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Home_FlareDetectionDialog_contactDetailsText",
                                    "value": "Please contact site at",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "SurveyDecisionScreen_title",
                                    "value": "How are you feeling?",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "SurveyDecisionScreen_ok",
                                    "value": "Ok",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "SurveyDecisionScreen_notOk",
                                    "value": "Not Ok",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Drawer_userName",
                                    "value": "John Smith",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Drawer_profileText",
                                    "value": "My Profile",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Drawer_homeMenu",
                                    "value": "Home",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Drawer_notificationsMenu",
                                    "value": "Notifications",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Drawer_studyMaterialMenu",
                                    "value": "Study Material",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Drawer_siteDetailsMenu",
                                    "value": "Contact Site",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Drawer_settingsMenu",
                                    "value": "Settings",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "Drawer_logoutMenu",
                                    "value": "Logout",
                                    "os": "android",
                                    "pre_login": true,
                                    "inserted_date": "2017-05-01 12:00:00"
                                }
                            ],
                            "updates": [{
                                    "key": "test_update_key1",
                                    "value": "Logout",
                                    "os": "android",
                                    "pre_login": true,
                                    "updated_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "test_update_key2",
                                    "value": "Logout",
                                    "os": "android",
                                    "pre_login": true,
                                    "updated_date": "2017-05-01 12:00:00"
                                }
                            ],
                            "deletes": [{
                                    "key": "test_delete_key1",
                                    "deleted_date": "2017-05-01 12:00:00"
                                }, {
                                    "key": "test_delete_key2",
                                    "deleted_date": "2017-05-01 12:00:00"
                                }
                            ]

                        }
                    },
                    "study_materials": {
                        "inserts": [{
                                "study_material_id": 1,
                                "title": "External Intro Video",
                                "type": "external_url_resource",
                                "file_url": "http://youtube.com/?v=123",
                                "pre_download_resource": false,
                                "section_category": "Videos"
                            }, {
                                "study_material_id": 2,
                                "title": "Internal Intro Video",
                                "type": "internal_cms_file_resource",
                                "file_url": "http://cms.com/files/study-materials/study-1/study-materials-1/video.avi",
                                "pre_download_resource": true,
                                "section_category": "Videos"
                            }, {
                                "study_material_id": 3,
                                "title": "Big Powerpoint File",
                                "type": "internal_cms_file_resource",
                                "file_url": "http://cms.com/files/study-materials/study-1/study-materials-2/big-powerpoint.ppt",
                                "pre_download_resource": false,
                                "section_category": "Documents"
                            }
                        ],
                        "updates": [],
                        "deletes": []
                    },
                    "app_materials": {
                        "inserts": [{
                                "app_material_id": 1,
                                "title": "External Intro Video",
                                "type": "external_url_resource",
                                "file_url": "http://youtube.com/?v=123",
                                "pre_download_resource": false,
                                "section_category": "Videos"
                            }, {
                                "app_material_id": 2,
                                "title": "Internal Intro Video",
                                "type": "internal_cms_file_resource",
                                "file_url": "http://cms.com/files/study-materials/study-1/study-materials-1/video.avi",
                                "pre_download_resource": true,
                                "section_category": "Videos"
                            }, {
                                "app_material_id": 3,
                                "title": "Big Powerpoint File",
                                "type": "internal_cms_file_resource",
                                "file_url": "http://cms.com/files/study-materials/study-1/study-materials-2/big-powerpoint.ppt",
                                "pre_download_resource": false,
                                "section_category": "Documents"
                            }
                        ],
                        "updates": [],
                        "deletes": []
                    },

                    "avatars": {
                        "avatar_group_id": 1,
                        "avatar_group_name": "Avatar Origami - Short Study",
                        "fallback_translation_key_avatar_awarded": "default_avatar_awarded_message ... something like: Congratulations, you have unlocked reached level ${avatar_order}",
                        "fallback_translation_key_avatar_achieve_title": "default_avatar_achieve_title_message ... something like: Level ${avatar_order}",
                        "fallback_translation_key_avatar_achieve_body": "default_avatar_achieve_title_message ... something like: You are the ${avatar_name}",
                        "inserts": [{
                                "avatar_id": 1,
                                "avatar_name": "Bird Origami",
                                "order": 1,
                                "translation_key_avatar_name": "",
                                "translation_key_avatar_awarded": "",
                                "translation_key_avatar_achieve_title": "",
                                "translation_key_avatar_achieve_body": "",
                                "pieces": [{
                                        "piece_name": "outline",
                                        "true_index": 1,
                                        "index": 0.0,
                                        "file_urls": [{
                                                "avatar_image_id":1,
                                                "screen_density": "android_mdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__1--i__0.0--n__Bird--d__outline--r__android_mdpi.png"
                                            }, {
                                                "avatar_image_id":2,
                                                "screen_density": "android_hdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__1--i__0.0--n__Bird--d__outline--r__android_hdpi.png"
                                            }, {
                                                "avatar_image_id":3,
                                                "screen_density": "android_xhdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__1--i__0.0--n__Bird--d__outline--r__android_xhdpi.png"
                                            }, {
                                                "avatar_image_id":4,
                                                "screen_density": "android_xxhdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__1--i__0.0--n__Bird--d__outline--r__android_xxhdpi.png"
                                            }, {
                                                "avatar_image_id":5,
                                                "screen_density": "android_xxxhdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__1--i__0.0--n__Bird--d__outline--r__android_xxxhdpi.png"
                                            }, {
                                                "avatar_image_id":6,
                                                "screen_density": "ios_1x",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__1--i__0.0--n__Bird--d__outline--r__ios_1x.png"
                                            }, {
                                                "avatar_image_id":7,
                                                "screen_density": "ios_2x",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__1--i__0.0--n__Bird--d__outline--r__ios_2x.png"
                                            }, {
                                                "avatar_image_id":8,
                                                "screen_density": "ios_3x",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__1--i__0.0--n__Bird--d__outline--r__ios_3x.png"
                                            }, {
                                                "avatar_image_id":9,
                                                "screen_density": "original",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__1--i__0.0--n__Bird--d__outline--r__original.png"
                                            }
                                        ]
                                    }, {
                                        "piece_name": "peice_1",
                                        "true_index": 2,
                                        "index": 0.5,
                                        "file_urls": [{
                                                "avatar_image_id":10,
                                                "screen_density": "android_mdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__2--i__0.5--n__Bird--d__piece_1--r__android_mdpi.png"
                                            }, {
                                                "avatar_image_id":11,
                                                "screen_density": "android_hdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__2--i__0.5--n__Bird--d__piece_1--r__android_hdpi.png"
                                            }, {
                                                "avatar_image_id":12,
                                                "screen_density": "android_xhdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__2--i__0.5--n__Bird--d__piece_1--r__android_xhdpi.png"
                                            }, {
                                                "avatar_image_id":13,
                                                "screen_density": "android_xxhdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__2--i__0.5--n__Bird--d__piece_1--r__android_xxhdpi.png"
                                            }, {
                                                "avatar_image_id":14,
                                                "screen_density": "android_xxxhdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__2--i__0.5--n__Bird--d__piece_1--r__android_xxxhdpi.png"
                                            }, {
                                                "avatar_image_id":15,
                                                "screen_density": "ios_1x",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__2--i__0.5--n__Bird--d__piece_1--r__ios_1x.png"
                                            }, {
                                                "avatar_image_id":16,
                                                "screen_density": "ios_2x",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__2--i__0.5--n__Bird--d__piece_1--r__ios_2x.png"
                                            }, {
                                                "avatar_image_id":17,
                                                "screen_density": "ios_3x",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__2--i__0.5--n__Bird--d__piece_1--r__ios_3x.png"
                                            }, {
                                                "avatar_image_id":18,
                                                "screen_density": "original",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__2--i__0.5--n__Bird--d__piece_1--r__original.png"
                                            }
                                        ]
                                    }, {
                                        "piece_name": "outline_w_piece_1",
                                        "true_index": 3,
                                        "index": 1.0,
                                        "file_urls": [{
                                                "avatar_image_id":19,
                                                "screen_density": "android_mdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__3--i__1.0--n__Bird--d__outline_w_piece_1--r__android_hdpi.png"
                                            }, {
                                                "avatar_image_id":20,
                                                "screen_density": "android_hdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__3--i__1.0--n__Bird--d__outline_w_piece_1--r__android_hdpi.png"
                                            }, {
                                                "avatar_image_id":21,
                                                "screen_density": "android_xhdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__3--i__1.0--n__Bird--d__outline_w_piece_1--r__android_xhdpi.png"
                                            }, {
                                                "avatar_image_id":22,
                                                "screen_density": "android_xxhdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__3--i__1.0--n__Bird--d__outline_w_piece_1--r__android_xxhdpi.png"
                                            }, {
                                                "avatar_image_id":23,
                                                "screen_density": "android_xxxhdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__3--i__1.0--n__Bird--d__outline_w_piece_1--r__android_xxxhdpi.png"
                                            }, {
                                                "avatar_image_id":24,
                                                "screen_density": "ios_1x",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__3--i__1.0--n__Bird--d__outline_w_piece_1--r__ios_1x.png"
                                            }, {
                                                "avatar_image_id":25,
                                                "screen_density": "ios_2x",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__3--i__1.0--n__Bird--d__outline_w_piece_1--r__ios_2x.png"
                                            }, {
                                                "avatar_image_id":26,
                                                "screen_density": "ios_3x",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__3--i__1.0--n__Bird--d__outline_w_piece_1--r__ios_3x.png"
                                            }, {
                                                "avatar_image_id":27,
                                                "screen_density": "original",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__3--i__1.0--n__Bird--d__outline_w_piece_1--r__original.png"
                                            }
                                        ]
                                    }, {
                                        "piece_name": "peice_2",
                                        "true_index": 4,
                                        "index": 1.5,
                                        "file_urls": [{
                                                "avatar_image_id":28,
                                                "screen_density": "android_mdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__4--i__1.5--n__Bird--d__piece_2--r__android_mdpi.png"
                                            }, {
                                                "avatar_image_id":29,
                                                "screen_density": "android_hdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__4--i__1.5--n__Bird--d__piece_2--r__android_hdpi.png"
                                            }, {
                                                "avatar_image_id":30,
                                                "screen_density": "android_xhdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__4--i__1.5--n__Bird--d__piece_2--r__android_xhdpi.png"
                                            }, {
                                                "avatar_image_id":31,
                                                "screen_density": "android_xxhdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__4--i__1.5--n__Bird--d__piece_2--r__android_xxhdpi.png"
                                            }, {
                                                "avatar_image_id":32,
                                                "screen_density": "android_xxxhdpi",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__4--i__1.5--n__Bird--d__piece_2--r__android_xxxhdpi.png"
                                            }, {
                                                "avatar_image_id":33,
                                                "screen_density": "ios_1x",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__4--i__1.5--n__Bird--d__piece_2--r__ios_1x.png"
                                            }, {
                                                "avatar_image_id":34,
                                                "screen_density": "ios_2x",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__4--i__1.5--n__Bird--d__piece_2--r__ios_2x.png"
                                            }, {
                                                "avatar_image_id":35,
                                                "screen_density": "ios_3x",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__4--i__1.5--n__Bird--d__piece_2--r__ios_3x.png"
                                            }, {
                                                "avatar_image_id":36,
                                                "screen_density": "original",
                                                "file_url": "http://cms.com/avatar-group-1/avatar-1/o__1--ti__4--i__1.5--n__Bird--d__piece_2--r__original.png"
                                            }
                                        ]
                                    }
                                ]
                            }, {
                                "avatar_id": 2,
                                "avatar_name": "Monkey Origami",
                                "order": 2,
                                "translation_key_avatar_name": "",
                                "translation_key_avatar_awarded": "",
                                "translation_key_avatar_achieve_title": "",
                                "translation_key_avatar_achieve_body": "",
                                "pieces": ["etc", "etc"]
                            }, {
                                "avatar_id": 3,
                                "avatar_name": "Giraffe Origami",
                                "order": 3,
                                "translation_key_avatar_name": "",
                                "translation_key_avatar_awarded": "",
                                "translation_key_avatar_achieve_title": "",
                                "translation_key_avatar_achieve_body": "",
                                "pieces": ["etc", "etc"]
                            }
                        ],
                        "updates": [],
                        "deletes": []
                    },
                    "badges": {
                        "badge_group_id": 1,
                        "badge_group_name": "Trophy Badges",
                        "fallback_translation_key_badge_awarded": "default_badge_awarded_message ... something like: Congratulations for reporting ${badge_streak_day} days in a row. Keep up the streak!",
                        "fallback_translation_key_badge_achieve_title": "default_badge_achieve_title_message ... something like: ${badge_streak_day}-day streak",
                        "fallback_translation_key_badge_achieve_body": "default_badge_achieve_body_message ... something like: You earned this award for answering your daily questions for ${badge_streak_day} consecutive days. Way to go!",
                        "inserts": [{
                                "badge_id": 1,
                                "badge_name": "Bronze Trophy",
                                "streak_days_to_win": 1,
                                "translation_key_badge_name": "",
                                "translation_key_badge_awarded": "",
                                "translation_key_badge_achieve_title": "",
                                "translation_key_badge_achieve_body": "",
                                "file_urls": [{
                                        "badge_image_id": 1,
                                        "screen_density": "android_mdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Bronze_Trophy--r__android_mdpi.png"
                                    }, {
                                        "badge_image_id": 2,
                                        "screen_density": "android_hdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Bronze_Trophy--r__android_hdpi.png"
                                    }, {
                                        "badge_image_id": 3,
                                        "screen_density": "android_xhdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Bronze_Trophy--r__android_xhdpi.png"
                                    }, {
                                        "badge_image_id": 4,
                                        "screen_density": "android_xxhdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Bronze_Trophy--r__android_xxhdpi.png"
                                    }, {
                                        "badge_image_id": 5,
                                        "screen_density": "android_xxxhdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Bronze_Trophy--r__android_xxxhdpi.png"
                                    }, {
                                        "badge_image_id": 6,
                                        "screen_density": "ios_1x",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Bronze_Trophy--r__ios_1x.png"
                                    }, {
                                        "badge_image_id": 7,
                                        "screen_density": "ios_2x",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Bronze_Trophy--r__ios_2x.png"
                                    }, {
                                        "badge_image_id": 8,
                                        "screen_density": "ios_3x",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Bronze_Trophy--r__ios_3x.png"
                                    }, {
                                        "badge_image_id": 9,
                                        "screen_density": "original",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Bronze_Trophy--r__original.png"
                                    }
                                ]
                            }, {
                                "badge_id": 2,
                                "badge_name": "Silver Trophy",
                                "streak_days_to_win": 3,
                                "translation_key_badge_name": "",
                                "translation_key_badge_awarded": "",
                                "translation_key_badge_achieve_title": "",
                                "translation_key_badge_achieve_body": "",
                                "file_urls": [{
                                        "badge_image_id": 10,
                                        "screen_density": "android_mdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Silver_Trophy--r__android_mdpi.png"
                                    }, {
                                        "badge_image_id": 11,
                                        "screen_density": "android_hdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Silver_Trophy--r__android_hdpi.png"
                                    }, {
                                        "badge_image_id": 12,
                                        "screen_density": "android_xhdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Silver_Trophy--r__android_xhdpi.png"
                                    }, {
                                        "badge_image_id": 13,
                                        "screen_density": "android_xxhdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Silver_Trophy--r__android_xxhdpi.png"
                                    }, {
                                        "badge_image_id": 14,
                                        "screen_density": "android_xxxhdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Silver_Trophy--r__android_xxxhdpi.png"
                                    }, {
                                        "badge_image_id": 15,
                                        "screen_density": "ios_1x",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Silver_Trophy--r__ios_1x.png"
                                    }, {
                                        "badge_image_id": 16,
                                        "screen_density": "ios_2x",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Silver_Trophy--r__ios_2x.png"
                                    }, {
                                        "badge_image_id": 17,
                                        "screen_density": "ios_3x",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Silver_Trophy--r__ios_3x.png"
                                    }, {
                                        "badge_image_id": 18,
                                        "screen_density": "original",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Silver_Trophy--r__original.png"
                                    }
                                ]
                            }, {
                                "badge_id": 3,
                                "badge_name": "Gold Trophy",
                                "streak_days_to_win": 5,
                                "translation_key_badge_name": "",
                                "translation_key_badge_awarded": "",
                                "translation_key_badge_achieve_title": "",
                                "translation_key_badge_achieve_body": "",
                                "file_urls": [{
                                        "badge_image_id": 19,
                                        "screen_density": "android_mdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Gold_Trophy--r__android_mdpi.png"
                                    }, {
                                        "badge_image_id": 20,
                                        "screen_density": "android_hdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Gold_Trophy--r__android_hdpi.png"
                                    }, {
                                        "badge_image_id": 21,
                                        "screen_density": "android_xhdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Gold_Trophy--r__android_xhdpi.png"
                                    }, {
                                        "badge_image_id": 22,
                                        "screen_density": "android_xxhdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Gold_Trophy--r__android_xxhdpi.png"
                                    }, {
                                        "badge_image_id": 23,
                                        "screen_density": "android_xxxhdpi",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Gold_Trophy--r__android_xxxhdpi.png"
                                    }, {
                                        "badge_image_id": 24,
                                        "screen_density": "ios_1x",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Gold_Trophy--r__ios_1x.png"
                                    }, {
                                        "badge_image_id": 25,
                                        "screen_density": "ios_2x",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Gold_Trophy--r__ios_2x.png"
                                    }, {
                                        "badge_image_id": 26,
                                        "screen_density": "ios_3x",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Gold_Trophy--r__ios_3x.png"
                                    }, {
                                        "badge_image_id": 27,
                                        "screen_density": "original",
                                        "file_url": "http://cms.com/badge-group-1/badge-1/name__Gold_Trophy--r__original.png"
                                    }
                                ]
                            }
                        ],
                        "updates": [],
                        "deletes": []
                    },
                    "app_info": {
                        "latency_minutes": 60
                    },
                    "study_info": {
                        "study_id": 7176,
                        "project_code": "FLAREFUL",
                        "cms_study_id": 1,
                        "avatar_trigger": "Send Flare Response --Note: maybe this is an name like send_flare_response, confirm with CMS Team", 
                        "badge_trigger": "Streak Data --Note: maybe this is an name like send_flare_response, confirm with CMS Team",
                        "number_hours_maintain_streak_data": 48,
                        "allow_user_to_take_survey_if_in_flare": true
                        "allow_gain_avatars_offline": false,
                        "allow_gain_badges_offline": false,
                        "allow_gain_same_badge_multiple_times": false,
                        "show_baseline_after_register": true,
                        "show_non_baseline_after_register": true,
                        "show_baseline_in_survey": false;
                        "editable_baseline_in_survey": false;
                        "show_baseline_link_in_settings": true;
                        
                        "spectrum_graph_colors": [  
                           {
                              "index":0,
                              "color":"#800080",
                              "color_name":"Pink"
                           },
                           {  
                              "index":1,
                              "color":"#7433DC",
                              "color_name":"Purple"
                           },
                           {  
                              "index":2,
                              "color":"#0000FF",
                              "color_name":"Blue"
                           },
                           {  
                              "index":3,
                              "color":"#00BFFF",
                              "color_name":"Cyan"
                           },
                           {  
                              "index":4,
                              "color":"#00FF00",
                              "color_name":"Green"
                           },
                           {  
                              "index":5,
                              "color":"#FFFF00",
                              "color_name":"Yellow"
                           },
                           {  
                              "index":6,
                              "color":"#FF4F15",
                              "color_name":"Orange"
                           },
                           {  
                              "index":7,
                              "color":"#FF0000",
                              "color_name":"Red"
                           }
                        ],
                        
                        "patient_profile_score": {
                            "patient_profile_score_formula": "((((QS1+QS2+QS3)<=3) && (IN_FLARE == false)) ? 20 :(((QS1+QS2+QS3)>=4) && ((QS1+QS2+QS3)<6) &&(IN_FLARE == false)) ? 40 :(((QS1+QS2+QS3)>=6) && ((QS1+QS2+QS3)<8) &&(IN_FLARE == false)) ? 60 :(((QS1+QS2+QS3)>=8) && (IN_FLARE == false)) ? 80 : false)",
                            "patient_profile_score_mapping": [
                             {"score": 20, "desc": "orange", "color": "#FFA500", "translation_key": "spectrum_color_1"},
                             {"score": 40, "desc": "yellow", "color": "#FFFF00", "translation_key": "spectrum_color_2"},
                             {"score": 60, "desc": "green", "color": "#00FF00", "translation_key": "spectrum_color_3"},
                             {"score": 80, "desc": "blue", "color": "#0000FF", "translation_key": "spectrum_color_4"},
                            ],
                        },
                        
                        "question_color_image_mapping": {
                            //research if possible to make this similar to inserts/updates/deletes
                                "questions": [      
                                                    {
                                                        "question_code": "QS1",
                                                        "question_color_image_logic": [{
                                                                "question_color_image_logic_id": 1,
                                                                "javascript_formula": "QS1 > 0 && QS1 <= 3",
                                                                "background_color": {
                                                                    "gradient_color_top": "#FF0000",
                                                                    "gradient_color_middle": "#00FF00",
                                                                    "gradient_color_bottom": "#0000FF"
                                                                },
                                                                "text_color": { "solid_color": "#000000" },
                                                                "file_urls": [{
                                                                        "screen_density": "android_mdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/happy-face--r__android_mdpi.png"
                                                                    }, {
                                                                        "screen_density": "android_hdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/happy-face--r__android_hdpi.png"
                                                                    }, {
                                                                        "screen_density": "android_xhdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/happy-face--r__android_xhdpi.png"
                                                                    }, {
                                                                        "screen_density": "android_xxhdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/happy-face--r__android_xxhdpi.png"
                                                                    }, {
                                                                        "screen_density": "android_xxxhdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/happy-face--r__android_xxxhdpi.png"
                                                                    }, {
                                                                        "screen_density": "ios_1x",
                                                                        "file_url": "http://cms.com/study-1/question-1/happy-face--r__ios_1x.png"
                                                                    }, {
                                                                        "screen_density": "ios_2x",
                                                                        "file_url": "http://cms.com/study-1/question-1/happy-face--r__ios_2x.png"
                                                                    }, {
                                                                        "screen_density": "ios_3x",
                                                                        "file_url": "http://cms.com/study-1/question-1/happy-face--r__ios_3x.png"
                                                                    }, {
                                                                        "screen_density": "original",
                                                                        "file_url": "http://cms.com/study-1/question-1/happy-face--r__original.png"
                                                                    }
                                                                ]
                                                            }, {
                                                                "question_color_image_logic_id": 2,
                                                                "javascript_formula": "QS1 > 4 && QS1 <= 6",
                                                                "background_color": {
                                                                    "solid_color": "#FF0000"
                                                                },
                                                                "text_color": { "solid_color": "#000000" },
                                                                "file_urls": [{
                                                                        "screen_density": "android_mdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/medium-face--r__android_mdpi.png"
                                                                    }, {
                                                                        "screen_density": "android_hdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/medium-face--r__android_hdpi.png"
                                                                    }, {
                                                                        "screen_density": "android_xhdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/medium-face--r__android_xhdpi.png"
                                                                    }, {
                                                                        "screen_density": "android_xxhdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/medium-face--r__android_xxhdpi.png"
                                                                    }, {
                                                                        "screen_density": "android_xxxhdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/medium-face--r__android_xxxhdpi.png"
                                                                    }, {
                                                                        "screen_density": "ios_1x",
                                                                        "file_url": "http://cms.com/study-1/question-1/medium-face--r__ios_1x.png"
                                                                    }, {
                                                                        "screen_density": "ios_2x",
                                                                        "file_url": "http://cms.com/study-1/question-1/medium-face--r__ios_2x.png"
                                                                    }, {
                                                                        "screen_density": "ios_3x",
                                                                        "file_url": "http://cms.com/study-1/question-1/medium-face--r__ios_3x.png"
                                                                    }, {
                                                                        "screen_density": "original",
                                                                        "file_url": "http://cms.com/study-1/question-1/medium-face--r__original.png"
                                                                    }
                                                                ]
                                                            }, {
                                                                "question_color_image_logic_id": 3,
                                                                "javascript_formula": "QS1 > 7 && QS1 <= 10",
                                                                "background_color": {
                                                                    "gradient_color_top": "#FF0000",
                                                                    "gradient_color_middle": "#00FF00",
                                                                    "gradient_color_bottom": "#0000FF"
                                                                },
                                                                "text_color": { "solid_color": "#000000" },
                                                                "file_urls": [{
                                                                        "screen_density": "android_mdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/sad-face--r__android_mdpi.png"
                                                                    }, {
                                                                        "screen_density": "android_hdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/sad-face--r__android_hdpi.png"
                                                                    }, {
                                                                        "screen_density": "android_xhdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/sad-face--r__android_xhdpi.png"
                                                                    }, {
                                                                        "screen_density": "android_xxhdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/sad-face--r__android_xxhdpi.png"
                                                                    }, {
                                                                        "screen_density": "android_xxxhdpi",
                                                                        "file_url": "http://cms.com/study-1/question-1/sad-face--r__android_xxxhdpi.png"
                                                                    }, {
                                                                        "screen_density": "ios_1x",
                                                                        "file_url": "http://cms.com/study-1/question-1/sad-face--r__ios_1x.png"
                                                                    }, {
                                                                        "screen_density": "ios_2x",
                                                                        "file_url": "http://cms.com/study-1/question-1/sad-face--r__ios_2x.png"
                                                                    }, {
                                                                        "screen_density": "ios_3x",
                                                                        "file_url": "http://cms.com/study-1/question-1/sad-face--r__ios_3x.png"
                                                                    }, {
                                                                        "screen_density": "original",
                                                                        "file_url": "http://cms.com/study-1/question-1/sad-face--r__original.png"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "question_color_image_logic_id": 4,
                                                                "javascript_formula": "true",
                                                                ...
                                                            }
                                                        ]
                                                    }, {
                                                        "question_code": "QS2",
                                                        "question_color_image_logic": ["etc", "etc"]
                                                    }, {
                                                        "question_code": "QS3",
                                                        "question_color_image_logic": ["etc", "etc"]
                                                    }
                        
                                  ]
                        
                            }
                    }
                },
                
                "acurian_services_data": {
                    "patient_info": {
                        "apiResponse": {
                            "FlareUser": {
                                "flareUserId": 289,
                                "emailId": "armyofda12mnkeys+4@gmail.com",
                                "phoneNumber": null,
                                "password": "K+0K/7Y1kVu7txOgfXw7F/jXUhKLeNUrVNfTuQKB83CZfSvz6OKrGTlcSwY/0VamkT7Fkrzs/9+M8YQ2Xrm0drN8Jc9AsXXRwdQBiwbFx2Mm0jBInnFBEHIFd7pMPKXl",
                                "registrationKey": "TG4M7H",
                                "languagePref": "en_US",
                                "studyId": 7176,
                                "textPref": true,
                                "phonePref": true,
                                "emailPref": true,
                                "surveyFreq": "DAILY",
                                "notifFreq": "WEEKLY",
                                "patientId": 60938249,
                                "oldPassword": "K+0K/7Y1kVu7txOgfXw7F/jXUhKLeNUrVNfTuQKB83CZfSvz6OKrGTlcSwY/0VamkT7Fkrzs/9+M8YQ2Xrm0drN8Jc9AsXXRwdQBiwbFx2Mm0jBInnFBEHIFd7pMPKXl",
                                "newPassword": null,
                                "status": "ACTIVE",
                                "firstName": "Acurian",
                                "lastName": "Trial",
                                "projectCode": "FLAREFUL",
                                "registrationKeyExpired": true,
                                "site": {
                                    "facilityName": "Abbot",
                                    "address1": "address 1",
                                    "address2": null,
                                    "city": "Horsham",
                                    "state": "PA",
                                    "zipCode": "19044",
                                    "zipExt": null,
                                    "country": "US",
                                    "timeZoneCd": "EST",
                                    "latitude": 40.1905662,
                                    "longitude": -75.1466602,
                                    "language": "en",
                                    "siteInvestigatorInfo": {
                                        "firstName": null,
                                        "lastName": null,
                                        "phoneNumber": null,
                                        "phoneExt": null,
                                        "faxNumber": null,
                                        "email": "ramesh.verala@acurian.com"
                                    }
                                },
                                "metaData": {
                                    "version": "0.0.1",
                                    "date": "Wed Jun 28 15:38:00 EDT 2017"
                                },
                                "dob": null,
                                "zipCode": null,
                                "streetAddress": null
                            }
                        },
                        "apiErrors": [{
                                "code": 201,
                                "status": "Created",
                                "message": "Successfully registered",
                                "moreInfo": "Successfully registered",
                                "httpStatus": "OK",
                                "versionInfo": "Supported"
                            }
                        ]
                    },
                    "survey_info": {
                        "apiResponse": {
                            "FlareSurvey": {
                                "languagePref": "en_US",
                                "flareStudyId": 7176,
                                "level": "1",
                                "projectCode": "FLAREFUL",
                                "followUpStudyId": 7158,
                                "followUpProjectCode": "FLARE1M",
                                "patientId": 60938249,
                                "oldPatientId": null,
                                "originalPatientId": null,
                                "lastUpdated": "2017-07-21 02:23:08 PM EDT",
                                "questionList": [{
                                        "questionCd": "Q0012577",
                                        "questionText": "On an average day, how many total bowel movements do you have?",
                                        "questionType": "Text Number Field",
                                        "questionBgImageUrl": null,
                                        "maxScaleValue": 0,
                                        "blocker": true,
                                        "viewType": null,
                                        "baseLine": false,
                                        "alternateQuestionText": "On an average day, how many total bowel movements do you have?",
                                        "questionnaireGroupAttributeCd": "STUDYQUES",
                                        "questionnaireElementUniqueCd": "QS1",
                                        "questionnaireRequiredInd": true,
                                        "questionnaireElementOrderNum": 1,
                                        "questionnaireElementId": 55002,
                                        "blockerLogic": [{
                                                "comparisonText": "(1==1)",
                                                "logicOrderNum": 1
                                            }
                                        ],
                                        "optionsList": []
                                    }, {
                                        "questionCd": "Q0012578",
                                        "questionText": "In the past 24 hours, how many total bowel movements did you have?",
                                        "questionType": "Text Number Field",
                                        "questionBgImageUrl": null,
                                        "maxScaleValue": 0,
                                        "blocker": true,
                                        "viewType": null,
                                        "baseLine": false,
                                        "alternateQuestionText": "In the past 24 hours, how many total bowel movements did you have?",
                                        "questionnaireGroupAttributeCd": "STUDYQUES",
                                        "questionnaireElementUniqueCd": "QS2",
                                        "questionnaireRequiredInd": true,
                                        "questionnaireElementOrderNum": 2,
                                        "questionnaireElementId": 55003,
                                        "blockerLogic": [{
                                                "comparisonText": "(QS1<4)",
                                                "logicOrderNum": 1
                                            }
                                        ],
                                        "optionsList": []
                                    }, {
                                        "questionCd": "Q0012579",
                                        "questionText": "Over the past 24 hours, did you notice any blood in your stool, on toilet tissue, or in the toilet bowl?",
                                        "questionType": "Radio",
                                        "questionBgImageUrl": null,
                                        "maxScaleValue": 0,
                                        "blocker": false,
                                        "viewType": null,
                                        "baseLine": false,
                                        "alternateQuestionText": "Over the past 24 hours, did you notice any blood in your stool, on toilet tissue, or in the toilet bowl?",
                                        "questionnaireGroupAttributeCd": "STUDYQUES",
                                        "questionnaireElementUniqueCd": "QS3",
                                        "questionnaireRequiredInd": true,
                                        "questionnaireElementOrderNum": 3,
                                        "questionnaireElementId": 55004,
                                        "blockerLogic": null,
                                        "optionsList": [{
                                                "optionId": "Y",
                                                "optionText": "Yes",
                                                "optionBgImageUrl": null,
                                                "optionIndex": 1
                                            }, {
                                                "optionId": "N",
                                                "optionText": "No",
                                                "optionBgImageUrl": null,
                                                "optionIndex": 2
                                            }
                                        ]
                                    }, {
                                        "questionCd": "Q0012621",
                                        "questionText": "Over the past 24 hours, did you notice any blood in your stool, on toilet tissue, or in the toilet bowl?",
                                        "questionType": "Radio",
                                        "questionBgImageUrl": null,
                                        "maxScaleValue": 0,
                                        "blocker": false,
                                        "viewType": null,
                                        "baseLine": false,
                                        "alternateQuestionText": "Over the past 24 hours, did you notice any blood in your stool, on toilet tissue, or in the toilet bowl?",
                                        "questionnaireGroupAttributeCd": "STUDYQUES",
                                        "questionnaireElementUniqueCd": "QS4",
                                        "questionnaireRequiredInd": true,
                                        "questionnaireElementOrderNum": 4,
                                        "questionnaireElementId": 55382,
                                        "blockerLogic": null,
                                        "optionsList": [{
                                                "optionId": "Y",
                                                "optionText": "Yes",
                                                "optionBgImageUrl": null,
                                                "optionIndex": 1
                                            }, {
                                                "optionId": "N",
                                                "optionText": "No",
                                                "optionBgImageUrl": null,
                                                "optionIndex": 2
                                            }
                                        ]
                                    }, {
                                        "questionCd": "Q0012622",
                                        "questionText": "Over the past 24 hours, did you notice any blood in your stool, on toilet tissue, or in the toilet bowl?",
                                        "questionType": "Radio",
                                        "questionBgImageUrl": null,
                                        "maxScaleValue": 0,
                                        "blocker": false,
                                        "viewType": null,
                                        "baseLine": false,
                                        "alternateQuestionText": "Over the past 24 hours, did you notice any blood in your stool, on toilet tissue, or in the toilet bowl?",
                                        "questionnaireGroupAttributeCd": "STUDYQUES",
                                        "questionnaireElementUniqueCd": "QS5",
                                        "questionnaireRequiredInd": true,
                                        "questionnaireElementOrderNum": 5,
                                        "questionnaireElementId": 55383,
                                        "blockerLogic": null,
                                        "optionsList": [{
                                                "optionId": "Y",
                                                "optionText": "Yes",
                                                "optionBgImageUrl": null,
                                                "optionIndex": 1
                                            }, {
                                                "optionId": "N",
                                                "optionText": "No",
                                                "optionBgImageUrl": null,
                                                "optionIndex": 2
                                            }
                                        ]
                                    }, {
                                        "questionCd": "Q0012623",
                                        "questionText": "Over the past 24 hours, did you notice any blood in your stool, on toilet tissue, or in the toilet bowl?",
                                        "questionType": "Radio",
                                        "questionBgImageUrl": null,
                                        "maxScaleValue": 0,
                                        "blocker": false,
                                        "viewType": null,
                                        "baseLine": false,
                                        "alternateQuestionText": "Over the past 24 hours, did you notice any blood in your stool, on toilet tissue, or in the toilet bowl?",
                                        "questionnaireGroupAttributeCd": "STUDYQUES",
                                        "questionnaireElementUniqueCd": "QS6",
                                        "questionnaireRequiredInd": true,
                                        "questionnaireElementOrderNum": 6,
                                        "questionnaireElementId": 55384,
                                        "blockerLogic": null,
                                        "optionsList": [{
                                                "optionId": "Y",
                                                "optionText": "Yes",
                                                "optionBgImageUrl": null,
                                                "optionIndex": 1
                                            }, {
                                                "optionId": "N",
                                                "optionText": "No",
                                                "optionBgImageUrl": null,
                                                "optionIndex": 2
                                            }
                                        ]
                                    }
                                ],
                                "logicSet": [{
                                        "comparisonText": "((QS1 >= 4) && ((QS2-QS1) >= 1) || (QS3==\"Y\"))",
                                        "logicOrderNum": 1
                                    }
                                ]
                            }
                        },
                        "apiErrors": [{
                                "code": 200,
                                "status": "Success",
                                "message": "Success",
                                "moreInfo": "Success",
                                "httpStatus": "OK",
                                "versionInfo": "Supported"
                            }
                        ]
                    }

                }
                
            }


## /login
### Login [POST]

Note: should authenticate user (via confirming user/pass via AS /authFlareUser) and issue jwt token
Note: Get all the data as mobile-team has wiped the device clean!!! So very very similar to /register.
Note: should call /authFlareUser AS service. Please look at dev-as if you can to look at sample request. 
Note: prob needs to get the PatientProfile (???Question??? for Dmitriy: should it just return the object from /authFlareUser or use /getFlareUserProfile, do they both return the same basically so don't need to call /getFlareUserProfile after /authFlareUser?), and PatientStatus (???Question for Dmitriy???: is the status of the patient truly in the returned object from /authFlareUser. if not, don't seem to see the true flare state in /getFlareUserStatus. they both seem to have a status:"ACTIVE" prop, but i dont think this is the true flare state but simple user status), and Patient's Baseline Answers (/getFlareSurveyBaselineQuestion), and SurveyQuestions (/getFlareSurvey) after authenticating user
Note: and CMS should return the usual data all in inserts array since starting from scratch (if logout, mobile-app data is wiped out... minus device-id i think)
Note: if the fcm_token is different than what we have for this device_id, i think it makes sense then inactivate the old one (in whatever device_id->fcm_token table we have) and insert new 'active' row

+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere

    + Attributes
        + OS (string) - android or ios or (web)
        + locale (string, optional) - assume 'en' (or 'en_US') if none passed
        + fcm_token (string) - mobile app will give us an FCM Token to register for that device
        + app_name (string) - machine name of app like 'default_flare_app' or 'pfizer_flare_app'
        + app_version (string) - examples: 'v1' or 'v1.5' or 'v2' 'v2.2' (do they want to just match on regex for example: 'v1\.1.*' and/or multiple versioning overrides per OS )
        + cms_version (string) - 'default' or 'v2', which pretend would correspond with login() and login_v2() respectively in the cms
        + device_id (string) - provide since already done on app 1st launch
        + app_last_updated_date (string) - 
        + preferred_screen_density - *** not sure if will be used yet *** android_mdpi, ios_1x, original (possibly for Badge and Avatar urls or i pass all urls and mobile-app can decide which one to use)
        + email - email is the mobile app's username
        + password - *** Note: any password inputs I believe will always be md5-ed be4 they get to us

    + Body
    
            {
                "OS": "android",
                "locale": "en_US",
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default"
                "device_id": "def124",
                "app_last_updated_date": "2017-05-01 23:00:00",
                "preferred_screen_density": "android_mdpi",
                
                "email": "test@hotmail.com",
                "password": "md5(password@2!$test)"
            }


+ Response 200 (application/json)
   + Attributes
        + request_status (RequestStatusObject)
        + cms_data (object)
            + jwt_token (string) - hmmm so if we can't call our own /login since it will return data as if you logged in for 1st time, then we have to call AS's login directly and get the jwt token here (also will issue one if user logs out and has to do a CMS /login)
            + cms_app_last_updated_date (string) -
            + theme_info (object) - filter post-login theme keys only!
                + theme_id
                + theme_name (string)
                + is_inherited (boolean)
                + inherited_theme_id (number) - doesn't show up if is_inherited is false
                + inherited_theme_name (string) - doesn't show up if is_inherited is false
                + theme_values (object)
                    + inserts (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + updates (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + deletes (array[TranslationOrThemeKeyValueDeleteObject])
            + translation_info (object) - filter post-login translation keys only!
                + translation_group_id (number) - adding this in case want a quick check later on
                + translation_group_name (string)
                + is_inherited  (boolean)
                + inherited_translation_group_id (number) - doesn't show up if is_inherited is false
                + inherited_translation_group_name (string) - doesn't show up if is_inherited is false
                + translation_locale_key (string) - //pretend we send up en_AU but only en is available, i return the locale/lang/country info so app knows which locale or lang we got it from.
                + translation_language (object)
                    + lang_code (string)
                    + lang_desc (string)
                + translation_country (object)
                    + country_code (string) - might be null if we using default en translation pretend
                    + country_desc (string) - might be null if we using default en translation pretend
                + translation_values (object)
                    + inserts (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + updates (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + deletes (array[TranslationOrThemeKeyValueDeleteObject])
            + study_materials
                + inserts (array[AppMaterialOrStudyMaterialInsertOrUpdateObject])
                + updates (array[AppMaterialOrStudyMaterialInsertOrUpdateObject])
                + deletes (array[AppMaterialOrStudyMaterialDeleteObject])
            + app_materials
                + inserts (array[AppMaterialOrStudyMaterialInsertOrUpdateObject])
                + updates (array[AppMaterialOrStudyMaterialInsertOrUpdateObject])
                + deletes (array[AppMaterialOrStudyMaterialDeleteObject])
            + avatars
                + avatar_group_id (number)
                + avatar_group_name (string)
                + fallback_translation_key_avatar_awarded (string) - lookup can fail
                + fallback_translation_key_avatar_achieve_title (string)  - lookup can fail
                + fallback_translation_key_avatar_achieve_body (string) - lookup can fail
                + inserts (array[AvatarInsertOrUpdateObject])
                + updates (array[AvatarInsertOrUpdateObject])
                + deletes (array[AvatarOrBadgeDeleteObject])
            + badges
                + badge_group_id (number)
                + badge_group_name (string)
                + fallback_translation_key_badge_awarded (string) - could be empty too
                + fallback_translation_key_badge_achieve_title (string) - could be empty too
                + fallback_translation_key_badge_achieve_body (string) - could be empty too
                + inserts (array[BadgeInsertOrUpdateObject])
                + updates (array[BadgeInsertOrUpdateObject])
                + deletes (array[AvatarOrBadgeDeleteObject])
            + user_reward_status
                + badge_status
                    + current_badge_streak (number)
                    + gained_badges (array[RewardBadgeObject]) - empty, not used
                    + gained_badges_history (array[RewardBadgeObject]) - higher priority now since may be used on rewards listing page
                + avatar_status
                    + gained_avatars (array[RewardAvatarObject]) - empty, not used
                    + gained_avatars_history (array[RewardAvatarObject]) - higher priority now since may be used on rewards listing page
            + app_info
                + latency_minutes (number) - this can probably be moved into study_info but im not very picky on this since its a true app configuration vs study... maybe we want to add more things in the future to the app_info
            + study_info
                + study_id (number) - already in the 
                + project_code (string)
                + cms_study_id (number)
                + avatar_trigger (string) - for now we only have 1 type of trigger, so using string for now. later we maybe have an id from the dropdown
                + badge_trigger (string) - for now we only have 1 type of trigger, so using string for now. later we maybe have an id from the dropdown
                + number_hours_maintain_streak_data (number)
                + allow_user_to_take_survey_if_in_flare (boolean)
                + allow_gain_avatars_offline (boolean)
                + allow_gain_badges_offline (boolean)
                + allow_gain_same_badge_multiple_times (boolean)
                + show_baseline_after_register (boolean)
                + show_non_baseline_after_register (boolean)
                + show_baseline_in_survey (boolean)
                + editable_baseline_in_survey (boolean)
                + show_baseline_link_in_settings (boolean)
                + spectrum_graph_colors (array[SpectrumColorObject]) - hardcoded for now, we will make a CMS page later to collect this info which will build the spectrum graph dynamically
                + patient_profile_score
                    + patient_profile_score_formula (string)
                    + patient_profile_score_mapping (array[PatientProfileScoreMappingObject])
                + question_color_image_mapping
                    + questions (array[QuestionColorImageMappingObject])
        + acurian_services_data (object)
            + patient_info (object) - pull this data from the AS service: POST /authFlareUser (params: emailID, password ... correspond to our values: email, password)
            + survey_info (object)  - pull this data from the AS service: GET /getFlareSurvey (params: patientId, languagePref ... correspond to the patient_id from AS, and locale values)
            + baseline_answers (object) - pull this data from the AS service: POST /getFlareSurveyBaselineQuestion (params: flareUserId ... correspond to the flare_user_id from AS value )




## /login/pure
### Login [POST]

Note: should authenticate user (via confirming user/pass via AS /authFlareUser) and issue jwt token

+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere

    + Attributes
        + OS (string) - android or ios or (web)
        + locale (string, optional) - assume 'en' (or 'en_US') if none passed
        + fcm_token (string) - mobile app will give us an FCM Token to register for that device
        + app_name (string) - machine name of app like 'default_flare_app' or 'pfizer_flare_app'
        + app_version (string) - examples: 'v1' or 'v1.5' or 'v2' 'v2.2' (do they want to just match on regex for example: 'v1\.1.*' and/or multiple versioning overrides per OS )
        + cms_version (string) - 'default' or 'v2', which pretend would correspond with login() and login_v2() respectively in the cms
        + device_id (string) - provide since already done on app 1st launch
        + app_last_updated_date (string) - 
        + preferred_screen_density - *** not sure if will be used yet *** android_mdpi, ios_1x, original (possibly for Badge and Avatar urls or i pass all urls and mobile-app can decide which one to use)
        + email - email is the mobile app's username
        + password - *** Note: any password inputs I believe will always be md5-ed be4 they get to us

    + Body
    
            {
                "OS": "android",
                "locale": "en_US",
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default"
                "device_id": "def124",
                "app_last_updated_date": null,
                "preferred_screen_density": "android_mdpi",
                
                "email": "test@hotmail.com",
                "password": "md5(password@2!$test)"
            }


+ Response 200 (application/json)
   + Attributes
        + request_status (RequestStatusObject)
        + cms_data (object)
            + jwt_token (string) - hmmm so if we can't call our own /login since it will return data as if you logged in for 1st time, then we have to call AS's login directly and get the jwt token here (also will issue one if user logs out and has to do a CMS /login)
            + cms_app_last_updated_date (string) -


## /authorization
### Authorization [POST]

Note: if jwt token is valid, allow user to 'auto-login', return any updated data since this is the only call after /appLaunch for already signed-in users (for heavy parts of the CMS like theme/translations/avatar/badges we have the inserts/updates/deletes concept... For the rest of the things that /register returns, for now return them the same way in /authorization).
Note: I asked the mobile team to send up the badge_group_id and avatar_group_id and theme_id and translation_group_id to do a quicker check to see if CMS Team wants to do a quick check to see if the main group id's have changed (if so, then don't need to calc inserts/updates/delets as everything would need to be put into inserts if CMS Admin changed the group).
???Question???: ask Dmitry:  we want him to record the auto-login so the user's 'last login date' gets updated in Oracle, should we call /authFlareUser after the jwt token is viewed as valid? if so, then we also need to get sent the mobile-app stored username and password
A little iffy on the acurian_services_data, for now copied from /login.

+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere
            JWT-Authorization: Bearer createdByCMSusedByMobileAppUntilExpiresAndNewOneThenIssuedAfterLogin

    + Attributes
        + jwt_token (string) - passed from the mobile app back to CMS, CMS will check if its a valid jwt token, and if so allow the login, if fails need to send back error code in the request_status->errors array (make sure sure the error_code is unique so mobile-app can know what to)
        + OS (string) - android or ios or (web)
        + locale (string, optional) - assume 'en' (or 'en_US') if none passed
        + fcm_token (string) - mobile app will give us an FCM Token to register for that device
        + app_name (string) - machine name of app like 'default_flare_app' or 'pfizer_flare_app'
        + app_version (string) - examples: 'v1' or 'v1.5' or 'v2' 'v2.2' (do they want to just match on regex for example: 'v1\.1.*' and/or multiple versioning overrides per OS )
        + cms_version (string) - 'default' or 'v2', which pretend would correspond with login() and login_v2() respectively in the cms
        + device_id (string) - provide since already done on app 1st launch
        + app_last_updated_date (string) - needs to get the latest info
        + preferred_screen_density - *** not sure if will be used yet *** android_mdpi, ios_1x, original (possibly for Badge and Avatar urls or i pass all urls and mobile-app can decide which one to use)
        + flare_user_id (number) - test
        + patient_id (number) - test
        + email (string) - test
        + theme_id (number)             - in case theme totally changed for user,             pass back everything for new theme in inserts array otherwise do normal inserts/updates/deletes check within the theme
        + translation_group_id (number) - in case translation-group totally changed for user, pass back everything for new translation-group in inserts array otherwise do normal inserts/updates/deletes check within the translation-group
        + avatar_group_id      (number) - in case avatar-group totally changed for user,      pass back everything for new avatar-group in inserts array otherwise do normal inserts/updates/deletes check within the avatar-group
        + badge_group_id       (number) - in case badge-group totally changed for user,       pass back everything for new badge-group in inserts array otherwise do normal inserts/updates/deletes check within the badge-group


    + Body
    
            {
                "jwt_token": "abc123..",
                "OS": "android",
                "locale": "en_US",
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default"
                "device_id": "def124",
                "app_last_updated_date": "2017-05-01 23:00:00",
                "preferred_screen_density": "android_mdpi",
                "flare_user_id": 101,
                "patient_id": 101010101,
                "email": "test@acurian.com"
                
                "avatar_group_id": 2,
                "badge_group_id": 2,
                "theme_id": 2,
                "translation_group_id": 2,
            }
            
+ Response 200 (application/json)
   + Attributes
        + request_status (RequestStatusObject)
        + cms_data (object)
            + cms_app_last_updated_date (string) - 
            + theme_info (object) - filter post-login theme keys only!
                + theme_id
                + theme_name (string)
                + is_inherited (boolean)
                + inherited_theme_id (number) - doesn't show up if is_inherited is false
                + inherited_theme_name (string) - doesn't show up if is_inherited is false
                + theme_values (object)
                    + inserts (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + updates (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + deletes (array[TranslationOrThemeKeyValueDeleteObject])
            + translation_info (object) - filter post-login translation keys only!\
                + translation_group_id (number) - adding this in case want a quick check later on
                + translation_group_name (string)
                + is_inherited  (boolean)
                + inherited_translation_group_id (number) - doesn't show up if is_inherited is false
                + inherited_translation_group_name (string) - doesn't show up if is_inherited is false
                + translation_locale_key (string) - //pretend we send up en_AU but only en is available, i return the locale/lang/country info so app knows which locale or lang we got it from.
                + translation_language (object)
                    + lang_code (string)
                    + lang_desc (string)
                + translation_country (object)
                    + country_code (string) - might be null if we using default en translation pretend
                    + country_desc (string) - might be null if we using default en translation pretend
                + translation_values (object)
                    + inserts (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + updates (array[TranslationOrThemeKeyValueInsertOrUpdateObject])
                    + deletes (array[TranslationOrThemeKeyValueDeleteObject])
            + study_materials
                + inserts (array[AppMaterialOrStudyMaterialInsertOrUpdateObject])
                + updates (array[AppMaterialOrStudyMaterialInsertOrUpdateObject])
                + deletes (array[AppMaterialOrStudyMaterialDeleteObject])
            + app_materials
                + inserts (array[AppMaterialOrStudyMaterialInsertOrUpdateObject])
                + updates (array[AppMaterialOrStudyMaterialInsertOrUpdateObject])
                + deletes (array[AppMaterialOrStudyMaterialDeleteObject])
            + avatars
                + avatar_group_id (number)
                + avatar_group_name (string)
                + fallback_translation_key_avatar_awarded (string) - lookup can fail
                + fallback_translation_key_avatar_achieve_title (string)  - lookup can fail
                + fallback_translation_key_avatar_achieve_body (string) - lookup can fail
                + inserts (array[AvatarInsertOrUpdateObject])
                + updates (array[AvatarInsertOrUpdateObject])
                + deletes (array[AvatarOrBadgeDeleteObject])
            + badges
                + badge_group_id (number)
                + badge_group_name (string)
                + fallback_translation_key_badge_awarded (string) - could be empty too
                + fallback_translation_key_badge_achieve_title (string) - could be empty too
                + fallback_translation_key_badge_achieve_body (string) - could be empty too
                + inserts (array[BadgeInsertOrUpdateObject])
                + updates (array[BadgeInsertOrUpdateObject])
                + deletes (array[AvatarOrBadgeDeleteObject])
            + user_reward_status
                + badge_status
                    + current_badge_streak (number)
                    + gained_badges (array[RewardBadgeObject]) - empty, not used
                    + gained_badges_history (array[RewardBadgeObject]) - higher priority now since may be used on rewards listing page
                + avatar_status
                    + gained_avatars (array[RewardAvatarObject]) - empty, not used
                    + gained_avatars_history (array[RewardAvatarObject]) - higher priority now since may be used on rewards listing page
            + app_info
                + latency_minutes (number) - this can probably be moved into study_info but im not very picky on this since its a true app configuration vs study... maybe we want to add more things in the future to the app_info
            + study_info
                + study_id (number) - already in the 
                + project_code (string)
                + cms_study_id (number)
                + avatar_trigger (string) - for now we only have 1 type of trigger, so using string for now. later we maybe have an id from the dropdown
                + badge_trigger (string) - for now we only have 1 type of trigger, so using string for now. later we maybe have an id from the dropdown
                + number_hours_maintain_streak_data (number)
                + allow_user_to_take_survey_if_in_flare (boolean)
                + allow_gain_avatars_offline (boolean)
                + allow_gain_badges_offline (boolean)
                + allow_gain_same_badge_multiple_times (boolean)
                + show_baseline_after_register (boolean)
                + show_non_baseline_after_register (boolean)
                + show_baseline_in_survey (boolean)
                + editable_baseline_in_survey (boolean)
                + show_baseline_link_in_settings (boolean)
                + spectrum_graph_colors (array[SpectrumColorObject]) - hardcoded for now, we will make a CMS page later to collect this info which will build the spectrum graph dynamically
                + patient_profile_score
                    + patient_profile_score_formula (string)
                    + patient_profile_score_mapping (array[PatientProfileScoreMappingObject])
                + question_color_image_mapping
                    + questions (array[QuestionColorImageMappingObject])
        + acurian_services_data (object)
            + patient_info (object) - pull this data from the AS service: POST /authFlareUser (params: emailID, password ... correspond to our values: email, password)
            + survey_info (object)  - pull this data from the AS service: GET /getFlareSurvey (params: patientId, languagePref ... correspond to our patient_id, and locale values)
            + baseline_answers (object) - pull this data from the AS service: POST /getFlareSurveyBaselineQuestion (params: flareUserId ... correspond to our flare_user_id value )

    


## /logout
### Logout user [POST]

will set a status on that device table, so that push notifications aren't accidentally still sent to that device for that user (but maybe another logged in user will have that same device activated for them so they should get the notifications)
Note: unset the JWT Token after, since we need to authenticate whether you can logout your user (otherwise can just unset anyone's session)

+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere
            JWT-Authorization: Bearer createdByCMSusedByMobileAppUntilExpiresAndNewOneThenIssuedAfterLogin

    + Attributes
        + OS (string) - android or ios or (web)
        + locale (string) - test
        + fcm_token (string) - test
        + app_name (string) - test
        + app_version (string) - test
        + cms_version (string) - test
        + device_id (string) - test
        + app_last_updated_date (string) - test
        + preferred_screen_density - *** not sure if will be used yet *** android_mdpi, ios_1x, original (possibly for Badge and Avatar urls or i pass all urls and mobile-app can decide which one to use)
        + flare_user_id (number) - test
        + patient_id (number) - test
        + email (string) - test

    + Body
    
            {
                "OS": "android",
                "locale": "en_US", 
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default"
                "device_id": "def124",
                "flare_user_id": 101,
                "patient_id": 101010101,
                "email": "test@acurian.com",
                "app_last_updated_date": "2017-05-01 23:00:00",
                "preferred_screen_density": "android_mdpi"
            }
            
+ Response 200 (application/json)

    + Attributes
        + request_status (RequestStatusObject)

    + Body
    
            {
                "not_sure_what_CMS_team_returning_yet": true
            }



    
# Group Password Group

## /changePassword
### Change Password [POST]

User is already signed into the app, so need to pass jwt token to make sure allowed to call this WS.
Note: should call /changeFlareUserPwd AS service. Please look at dev-as if you can to look at sample request.

+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere
            JWT-Authorization: Bearer createdByCMSusedByMobileAppUntilExpiresAndNewOneThenIssuedAfterLogin

    + Attributes
        + jwt_token - since user already signed into mobile app, need to check if signed in
        + OS (string) - android or ios or (web)
        + locale (string, optional) - assume 'en' (or 'en_US') if none passed
        + fcm_token (string) - mobile app will give us an FCM Token to register for that device
        + app_name (string) - machine name of app like 'default_flare_app' or 'pfizer_flare_app'
        + app_version (string) - examples: 'v1' or 'v1.5' or 'v2' 'v2.2' (do they want to just match on regex for example: 'v1\.1.*' and/or multiple versioning overrides per OS )
        + cms_version (string) - 'default' or 'v2', which pretend would correspond with login() and login_v2() respectively in the cms
        + device_id (string, optional) - provide if already gotton on app's 1st launch (response won't issue a new device_id, if one already passed up)
        + app_last_updated_date (string, optional) - needs to get the latest info so supply on subsequent launches
        + preferred_screen_density - *** not sure if will be used yet *** android_mdpi, ios_1x, original (possibly for Badge and Avatar urls or i pass all urls and mobile-app can decide which one to use)
        + flare_user_id (number) - test
        + patient_id (number) - test
        + email (string) - test
        + oldPassword (string)
        + newPassword (string)
        
    + Body
    
            {
                "jwt_token": "abc123",
                "OS": "android",
                "locale": "en_US",
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default"
                "device_id": "def124",
                "app_last_updated_date": "2017-05-01 23:00:00",
                "preferred_screen_density": "android_mdpi",
                "email": "test@hotmail.com",
                "oldPassword": "oldPass123"
                "newPassword": "newPass123"
            }
            
+ Response 200 (application/json)


    + Attributes
        + request_status (RequestStatusObject)
        + cms_data - empty
        + acurian_services_data - just passalong data like below example
        
    + Body
    
            {
                "request_status": {
                    "status": "success"
                },
                "cms_data": {},
                "acurian_services_data": {
                    apiResponse: {
                        FlareUser: {
                            flareUserId: 289,
                            emailId: "armyofda12mnkeys+4@gmail.com",
                            phoneNumber: null,
                            password: "K+0K/7Y1kVu7txOgfXw7F/jXUhKLeNUrVNfTuQKB83DuMmoEtjhHBHbaUcRIEApr8UaKzHEVfjRSD8476+WJ33kO9oLW37OPr7PS060gjhkBZHwubOoXyWKFbrm04/vK",
                            registrationKey: "TG4M7H",
                            languagePref: "en_US",
                            studyId: 7176,
                            textPref: true,
                            phonePref: true,
                            emailPref: true,
                            surveyFreq: "DAILY",
                            notifFreq: "WEEKLY",
                            patientId: 60938249,
                            oldPassword: "K+0K/7Y1kVu7txOgfXw7F/jXUhKLeNUrVNfTuQKB83CZfSvz6OKrGTlcSwY/0VamkT7Fkrzs/9+M8YQ2Xrm0drN8Jc9AsXXRwdQBiwbFx2Mm0jBInnFBEHIFd7pMPKXl",
                            newPassword: null,
                            status: "ACTIVE",
                            firstName: "Acurian",
                            lastName: "Trial",
                            projectCode: "FLAREFUL",
                            registrationKeyExpired: true,
                            site: null,
                            metaData: {
                            version: "0.0.1",
                            date: "Mon Jul 31 13:46:35 EDT 2017"
                            },
                            dob: null,
                            zipCode: null,
                            streetAddress: null,
                            lastLoginDate: null,
                            lastSurveySubmissionDate: null
                        }
                    },
                    apiErrors: [{
                            code: 200,
                            status: "CHANGED",
                            message: "Successfully changed",
                            moreInfo: "Successfully changed",
                            httpStatus: "OK",
                            versionInfo: "Supported"
                        }
                    ]
                }
            }


## /forgotPassword
### Forgot Password [POST]

This will email a link to the user to reset their password. 
User will click on that link and reset it, and then next /resetPassword ws is called.
Important!: They initially wanted either us or AS WS to generate the email and the reset link inside of it (note: looks like AS will do the heavy grunt work for this now luckily so we dont have to implement this complex system).
Don't think jwt token is needed here, since you want user to click Forgot Password from before signed into app (since they don't know password in first place so their jwt token is probably invalid).
Note: should call /forgotFlareUserPwd AS service (seems like they are just confirming this email is valid to send a reset email to. That means we need to create a system to send emails and also a webform for that email's reset link to submit below /resetPassword). Please look at dev-as if you can to look at sample request.

+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere

    + Attributes
        + OS (string) - android or ios or (web)
        + locale (string, optional) - assume 'en' (or 'en_US') if none passed
        + fcm_token (string) - mobile app will give us an FCM Token to register for that device
        + app_name (string) - machine name of app like 'default_flare_app' or 'pfizer_flare_app'
        + app_version (string) - examples: 'v1' or 'v1.5' or 'v2' 'v2.2' (do they want to just match on regex for example: 'v1\.1.*' and/or multiple versioning overrides per OS )
        + cms_version (string) - 'default' or 'v2', which pretend would correspond with login() and login_v2() respectively in the cms
        + device_id (string, optional) - provide if already gotton on app's 1st launch (response won't issue a new device_id, if one already passed up)
        + app_last_updated_date (string, optional) - eh dont think this really needed here
        + preferred_screen_density - eh dont think this really needed here
        + email

    + Body
    
            {
                "OS": "android",
                "locale": "en_US",
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default"
                "device_id": "def124",
                "app_last_updated_date": "2017-05-01 23:00:00",
                "preferred_screen_density": "android_mdpi",
                "email": "test@hotmail.com"
            }
        
+ Response 200 (application/json)

    + Attributes
        + request_status (RequestStatusObject)
        + cms_data - empty
        + acurian_services_data - just passalong data like below example
        
    + Body
    
            {
                "request_status": {
                    "status": "success"
                },
                "cms_data": {},
                "acurian_services_data": {
                    apiResponse: {
                        FlareUser: {
                            flareUserId: 289,
                            emailId: "armyofda12mnkeys+4@gmail.com",
                            phoneNumber: null,
                            password: "K+0K/7Y1kVu7txOgfXw7F/jXUhKLeNUrVNfTuQKB83CZfSvz6OKrGTlcSwY/0VamkT7Fkrzs/9+M8YQ2Xrm0drN8Jc9AsXXRwdQBiwbFx2Mm0jBInnFBEHIFd7pMPKXl",
                            registrationKey: "TG4M7H",
                            languagePref: "en_US",
                            studyId: 7176,
                            textPref: true,
                            phonePref: true,
                            emailPref: true,
                            surveyFreq: "DAILY",
                            notifFreq: "WEEKLY",
                            patientId: 60938249,
                            oldPassword: "K+0K/7Y1kVu7txOgfXw7F/jXUhKLeNUrVNfTuQKB83DuMmoEtjhHBHbaUcRIEApr8UaKzHEVfjRSD8476+WJ33kO9oLW37OPr7PS060gjhkBZHwubOoXyWKFbrm04/vK",
                            newPassword: null,
                            status: "ACTIVE",
                            firstName: "Acurian",
                            lastName: "Trial",
                            projectCode: "FLAREFUL",
                            registrationKeyExpired: true,
                            site: null,
                            metaData: {
                                version: "0.0.1",
                                date: "Mon Jul 31 13:49:47 EDT 2017"
                            },
                            dob: null,
                            zipCode: null,
                            streetAddress: null,
                            lastLoginDate: null,
                            lastSurveySubmissionDate: null
                        }
                    },
                    apiErrors: [{
                            code: 200,
                            status: "FORGOT_PASSWORD_EMAIL_SENT",
                            message: "Email sent successfully to reset the password",
                            moreInfo: "Email sent successfully to reset the password",
                            httpStatus: "OK",
                            versionInfo: "Supported"
                        }
                    ]
                }
            }


## /resetPassword
### Reset Password [POST]

Above /forgotPassword will email a link to the user to rest their password. 
User will click on that link and reset it, and then THIS /resetPassword ws is called.
Don't think jwt token is needed here, since its being called from a webpage outside of mobile-app.
Note: should call /resetFlareUserPwd AS service. Please look at dev-as if you can to look at sample request.
Note: ask Dmitriy if this webpage form has or needs more security (i think i saw it passes just email as its param so i can type anyone's email to reset it).

+ Request 200 (application/json)
    
    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere

    + Attributes
        + email
        + password

    + Body 
    
            {
                "email": "test@hotmail.com",
                "password": "pass123"
            }
            
+ Response 200 (application/json)

    + Attributes
        + request_status (RequestStatusObject)
        + cms_data - empty
        + acurian_services_data - just passalong data like below example
        
    + Body
    
            {
                "request_status": {
                    "status": "success"
                },
                "cms_data": {},
                "acurian_services_data": {
                    apiResponse: {
                        FlareUser: {
                            flareUserId: 289,
                            emailId: "armyofda12mnkeys+4@gmail.com",
                            phoneNumber: null,
                            password: "K+0K/7Y1kVu7txOgfXw7F/jXUhKLeNUrVNfTuQKB83CZfSvz6OKrGTlcSwY/0VamkT7Fkrzs/9+M8YQ2Xrm0drN8Jc9AsXXRwdQBiwbFx2Mm0jBInnFBEHIFd7pMPKXl",
                            registrationKey: "TG4M7H",
                            languagePref: "en_US",
                            studyId: 7176,
                            textPref: true,
                            phonePref: true,
                            emailPref: true,
                            surveyFreq: "DAILY",
                            notifFreq: "WEEKLY",
                            patientId: 60938249,
                            oldPassword: "K+0K/7Y1kVu7txOgfXw7F/jXUhKLeNUrVNfTuQKB83DuMmoEtjhHBHbaUcRIEApr8UaKzHEVfjRSD8476+WJ33kO9oLW37OPr7PS060gjhkBZHwubOoXyWKFbrm04/vK",
                            newPassword: null,
                            status: "ACTIVE",
                            firstName: "Acurian",
                            lastName: "Trial",
                            projectCode: "FLAREFUL",
                            registrationKeyExpired: true,
                            site: null,
                            metaData: {
                                version: "0.0.1",
                                date: "Mon Jul 31 13:48:10 EDT 2017"
                            },
                            dob: null,
                            zipCode: null,
                            streetAddress: null,
                            lastLoginDate: null,
                            lastSurveySubmissionDate: null
                        }
                    },
                    apiErrors: [{
                            code: 200,
                            status: "CHANGED",
                            message: "Successfully changed",
                            moreInfo: "Successfully changed",
                            httpStatus: "OK",
                            versionInfo: "Supported"
                        }
                    ]
                }
            }


# Group Sending Flare Answers


## /sendFlareResponse
### send Flare Response [POST]

note: will call AS WS /setFlareSurveyResponses
note: send up this Studies flag as allowedToTakeSurveyIfInFlare, true or false

+ Request (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere
            JWT-Authorization: Bearer createdByCMSusedByMobileAppUntilExpiresAndNewOneThenIssuedAfterLogin

    + Attributes
        + jwt_token (string) - test
        + OS (string) - android or ios or (web)
        + locale (string) - test
        + fcm_token (string) - test
        + app_name (string) - test
        + app_version (string) - test
        + cms_version (string) - test
        + device_id (string) - test
        + app_last_updated_date (string) - test
        + preferred_screen_density - test
        + flare_user_id (number) - test
        + patient_id (number) - test
        + email (string) - test
        + patient_profile_score_formula (string) - send up what profile score formula as maybe these were evaluated offline?
        + current_stored_flare_logic (array[CurrentStoredFlareLogicObj])
        + flare_responses (array[FlareResponse]) -

    + Body


            {
                "jwt_token": "abc123",

                "OS": "android",
                "locale": "en_US",
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default"
                "device_id": "def124",
                "app_last_updated_date": "2017-05-01 23:00:00",
                "preferred_screen_density": "android_mdpi",
                "flare_user_id": 101,
                "patient_id": 101010101,
                "email": "test@hotmail.com"
                "patient_profile_score_formula": "((((QS1+QS2+QS3)<=3) && (IN_FLARE == false)) ? 20 :(((QS1+QS2+QS3)>=4) && ((QS1+QS2+QS3)<6) &&(IN_FLARE == false)) ? 40 :(((QS1+QS2+QS3)>=6) && ((QS1+QS2+QS3)<8) &&(IN_FLARE == false)) ? 60 :(((QS1+QS2+QS3)>=8) && (IN_FLARE == false)) ? 80 : false)",
                "current_stored_flare_logic": [ //Elan will use this to see if stored offline logic is not trustable (if screener logic has changed)
                    {
                        "logic_order_num": 1,
                        "comparison_text": "QS1<2"
                    },
                    {
                        "logic_order_num": 2,
                        "comparison_text": "QS1>5"
                    },
                ],
                "evaluated_offline": true,
                "flare_responses": [ 
                    {
                      "submission_order": 1,
                      "submission_date": "2017-05-21 13:00:00",
                      "is_blocked_submission": false,
                      "answers": [
                        {
                          question_cd: "QS1",
                          question_group_code: "STUDYQUES",
                          question_type: "IRADIO",
                          view_type: "view1",
                          answer_value: "1",
                          answer_value_list: null
                        },
                        {
                          question_cd: "QS2",
                          question_group_code: "STUDYQUES",
                          question_type: "IRADIO",
                          view_type: "default",
                          answer_value: "2",
                          answer_value_list: null
                        },
                        {
                          question_cd: "QS3",
                          question_group_code: "STUDYQUES",
                          question_type: "IRADIO",
                          view_type: "default",
                          answer_value: "3",
                          answer_value_list: null
                        },
                        {
                          question_cd: "QS4",
                          question_group_code: "STUDYQUES",
                          question_type: "CHKBOX",
                          view_type: "default",
                          answer_value: null,
                          answer_value_list: ["A", "4", "B", "5"]
                        },
                        {
                          question_cd: "QS5",
                          question_group_code: "STUDYQUES",
                          question_type: "TXTNUM",
                          view_type: "default",
                          answer_value: "200",
                          answer_value_list: null
                        }
                      ],
                    },
                    {
                      "submission_order": 2,
                      "submission_date": "2017-05-22 13:00:00",
                      "is_blocked_submission": false,
                      "answers": [
                        {
                          question_cd: "QS1",
                          question_group_code: "STUDYQUES",
                          question_type: "IRADIO",
                          view_type: "view1",
                          answer_value: "5",
                          answer_value_list: null
                        },
                        {
                          question_cd: "QS2",
                          question_group_code: "STUDYQUES",
                          question_type: "IRADIO",
                          view_type: "default",
                          answer_value: "C",
                          answer_value_list: null
                        },
                        {
                          question_cd: "QS3",
                          question_group_code: "STUDYQUES",
                          question_type: "IRADIO",
                          view_type: "default",
                          answer_value: "4",
                          answer_value_list: null
                        },
                        {
                          question_cd: "QS4",
                          question_group_code: "STUDYQUES",
                          question_type: "CHKBOX",
                          view_type: "default",
                          answer_value: null,
                          answer_value_list: ["A", "4"]
                        },
                        {
                          question_cd: "QS5",
                          question_group_code: "STUDYQUES",
                          question_type: "TXTNUM",
                          view_type: "default",
                          answer_value: "333",
                          answer_value_list: null
                        }
                      ],
                    }
                  ]
            }


+ Response 200 (application/json)

    + Attributes
        + request_status (RequestStatusObject)
        + cms_data - 
            + user_reward_status
                + badge_status
                    + current_badge_streak (number)
                    + gained_badges (array[RewardBadgeObject]) - badges won on this submission
                    + gained_badges_history (array[RewardBadgeObject]) - mid priority, mobile app can use history from login but may be outdated so update here too
                + avatar_status
                    + gained_avatars (array[RewardAvatarObject]) - avatar/pieces won on this submission
                    + gained_avatars_history (array[RewardAvatarObject]) - mid priority, mobile app can use history from login but may be outdated so update here too

        + acurian_services_data - just passalong data, will have basically flare_status, flare_score, flare_score_alt_value for each response
        
    + Body
    
            {
                "request_status": {
                    "status": "success"
                },
                "cms_data": {
                    "user_reward_status": --from my email
                },
                "acurian_services_data": {
                    apiResponse: {
                        FlareSurveyResponse: {
                            surveyResponsesId: 0,
                            patientId: 48363818,
                            flareUserId: 411,
                            followUpStudyId: 7055,
                            isOffline: true,
                            logicList: [
                                "(QS2 - QS1 >= 4) && (QS3 >= 5)"
                            ],
                            scoreFormula: "(flareStatus==" IN_FLARE ") ? ((QS1+QS2+QS3/3 >= 0 && QS1+QS2+QS3/3 <= 7) ? 20 : (QS1+QS2+QS3/3 >= 8 && QS1+QS2+QS3/3 <= 16) ? 40 : (QS1+QS2+QS3/3 >= 17 && QS1+QS2+QS3/3 <= 23) ? 60 : 80) : -1",
                            scoreAltMapping: [{
                                    score: 20,
                                    desc: "orange"
                                }, {
                                    score: 40,
                                    desc: "yellow"
                                }, {
                                    score: 60,
                                    desc: "green"
                                }, {
                                    score: 80,
                                    desc: "blue"
                                }
                            ],
                            flareSurveyResponseList: [{
                                    submissionDate: "2017-09-23 15:05:05",
                                    answersList: [{
                                            surveyAnsRespId: 0,
                                            qstnrElementUniqueCd: "QS1",
                                            qstnrGroupAttributeCd: "STUDYQUES",
                                            answerType: "IRADIO",
                                            value: "1",
                                            optionsList: []
                                        }, {
                                            surveyAnsRespId: 0,
                                            qstnrElementUniqueCd: "QS2",
                                            qstnrGroupAttributeCd: "STUDYQUES",
                                            answerType: "IRADIO",
                                            value: "2",
                                            optionsList: []
                                        }, {
                                            surveyAnsRespId: 0,
                                            qstnrElementUniqueCd: "QS3",
                                            qstnrGroupAttributeCd: "STUDYQUES",
                                            answerType: "IRADIO",
                                            value: "3",
                                            optionsList: []
                                        }, {
                                            surveyAnsRespId: 0,
                                            qstnrElementUniqueCd: "QS4",
                                            qstnrGroupAttributeCd: "STUDYQUES",
                                            answerType: "CHKBOX",
                                            value: null, -- not sure if empty or null for CHKBOX questions, ask AS team
                                            optionsList: ["A", "4", "B", "5"]
                                        }, {
                                            surveyAnsRespId: 0,
                                            qstnrElementUniqueCd: "QS5",
                                            qstnrGroupAttributeCd: "STUDYQUES",
                                            answerType: "TXTNUM",
                                            value: "200",
                                            optionsList: []
                                        }
                                    ],
                                    flareStatus: "NOT_INFLARE",
                                    flareScore: 60,
                                    flareScoreAltValue: "yellow",
                                    isSurveyEvaluated: true
                                }, {
                                    submissionDate: "2017-09-22 15:05:05",
                                    answersList: [{
                                            surveyAnsRespId: 0,
                                            qstnrElementUniqueCd: "QS1",
                                            qstnrGroupAttributeCd: "STUDYQUES",
                                            answerType: "IRADIO",
                                            value: "4",
                                            optionsList: []
                                        }, {
                                            surveyAnsRespId: 0,
                                            qstnrElementUniqueCd: "QS2",
                                            qstnrGroupAttributeCd: "STUDYQUES",
                                            answerType: "IRADIO",
                                            value: "5",
                                            optionsList: []
                                        }, {
                                            surveyAnsRespId: 0,
                                            qstnrElementUniqueCd: "QS3",
                                            qstnrGroupAttributeCd: "STUDYQUES",
                                            answerType: "IRADIO",
                                            value: "6",
                                            optionsList: []
                                        }, {
                                            surveyAnsRespId: 0,
                                            qstnrElementUniqueCd: "QS4",
                                            qstnrGroupAttributeCd: "STUDYQUES",
                                            answerType: "CHKBOX",
                                            value: "333",
                                            optionsList: []
                                        }, {
                                            surveyAnsRespId: 0,
                                            qstnrElementUniqueCd: "QS5",
                                            qstnrGroupAttributeCd: "STUDYQUES",
                                            answerType: "TXTNUM",
                                            value: null, -- not sure if empty or null for CHKBOX questions, ask AS team
                                            optionsList: ["A", "4"]
                                        }
                                    ],
                                    flareStatus: "NOT_INFLARE",
                                    flareScore: 80,
                                    flareScoreAltValue: "orange",
                                    isSurveyEvaluated: true
                                }
                            ],
                            startDate: null,
                            endDate: null
                        }
                    },
                    apiErrors: [{
                            code: 200,
                            status: "Success",
                            message: "Success",
                            moreInfo: "Success",
                            httpStatus: "OK",
                            versionInfo: "Supported"
                        }
                    ]
                }
            }



## /updateProfileBaselineQuestions
### Update Profile Baseline Questions [POST]

Note: will pass an array of submissions/answers, but for now only 1 submission/answer will be in the array. basically a flare response.
???Question???: Did Dmitriy define this AS WS counterpart yet? possibly is /setFlareSurveyBaselineQuestion (look at dev-as, seems like passes an array of values)

+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere
            JWT-Authorization: Bearer createdByCMSusedByMobileAppUntilExpiresAndNewOneThenIssuedAfterLogin

    + Attributes
        + jwt_token (string) - test
        + OS (string) - android or ios or (web)
        + locale (string) - test
        + fcm_token (string) - test
        + app_name (string) - test
        + app_version (string) - test
        + cms_version (string) - test
        + device_id (string) - test
        + app_last_updated_date (string) - test
        + preferred_screen_density - test
        + flare_user_id (number) - test
        + patient_id (number) - test
        + email (string) - test
        + baseline_flare_responses (array[FlareResponse]) - for now same structure as sendFlareResponse... assume only 1 submission and only 1 answer within that submission (but for consistancy left as array of submissions and array of answers in case in future can submit multiple questions at one time and/or multiple submissions[less likely since baseline probably won't support offline mode])


    + Body

            {
                "jwt_token": "abc123...",
                "OS": "android"
                "locale": "locale",
                "fcm_token": "def456",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default"
                "device_id": "ghi789",
                "app_last_updated_date": "2017-05-14 13:00:00",
                "preferred_screen_density": "android_mdpi",
                "flare_user_id": 101,
                "patient_id": 101010101,
                "email": "test@acurian.com"
                "baseline_flare_responses": [ 
                    {
                      "submission_order": 1,
                      "submission_date": "2017-05-21 13:00:00",
                      "answers": [
                        {
                          question_cd: "QS1",
                          question_group_code: "STUDYQUES",
                          question_type: "radio",
                          view_type: "view1",
                          answer_value: "4",
                          answer_value_list: null
                        }
                      ]
                    }
                ]
            }
    
+ Response 200 (application/json)

    + Body

            {
                "status": "success",
                "extra_info": "Baseline question(s) updated"
            }


# Other

## /hasViewedAppStudyMaterials 
### Has Viewed App Study Materials [POST]

+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere
            JWT-Authorization: Bearer createdByCMSusedByMobileAppUntilExpiresAndNewOneThenIssuedAfterLogin

    + Attributes
        + app_name (string) - the only required field from the "default's sent by the app" needed for this
        + viewed_materials (array[ViewedMaterial]) - viewed materials
        
    + Body


            {   
                "jwt_token": "abc123...",
                "OS": "android"
                "locale": "locale",
                "fcm_token": "def456",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default"
                "device_id": "ghi789",
                "app_last_updated_date": "2017-05-14 13:00:00",
                "preferred_screen_density": "android_mdpi",
                "flare_user_id": 101,
                "patient_id": 101010101,
                "email": "test@acurian.com", 
                
                "viewed_materials": [{
                        "material_id": 1,
                        "material_type": "study",
                    },
                    {
                        "material_id": 1,
                        "material_type": "app",
                    },
                    {
                        "material_id": 2,
                        "material_type": "study"
                    }
                ]
            }

+ Response 200 (application/json)
    
    + Body

            {
                "request_status": {
                    "status": "success"
                },
                "cms_data": {
                    "viewed_materials": [{
                            "material_id": 1,
                            "material_type": "study",
                        },
                        {
                            "material_id": 1,
                            "material_type": "app",
                        },
                        {
                            "material_id": 2,
                            "material_type": "study"
                        },
                        {
                            "material_id": 3,
                            "material_type": "app"
                        },
                        {
                            "material_id": 4,
                            "material_type": "study"
                        }
                    ]
                },
                "acurian_services_data": {}
            }

## /listViewedAppStudyMaterials
### List Viewed App Study Materials [POST]
***JWT token is also required.

+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere
            JWT-Authorization: Bearer createdByCMSusedByMobileAppUntilExpiresAndNewOneThenIssuedAfterLogin

+ Response 200 (application/json)

    ... not sure yet ...

# Group Reporting/Spectrum Graph web services

## /getFlareUserSpectrumGraph
### Get Flare User's Spectrum Graph [POST]

Note: should call /getFlareSurveyHistoricalResponses AS service. Please look at dev-as if you can to look at sample request.

+ Request (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere
            JWT-Authorization: Bearer createdByCMSusedByMobileAppUntilExpiresAndNewOneThenIssuedAfterLogin

    + Attributes
        + jwt_token (string) - test
        + OS (string) - android or ios or (web)
        + locale (string) - test
        + fcm_token (string) - test
        + app_name (string) - test
        + app_version (string) - test
        + cms_version (string) - test
        + device_id (string) - test
        + app_last_updated_date (string) - test
        + preferred_screen_density - *** not sure if will be used yet *** android_mdpi, ios_1x, original (possibly for Badge and Avatar urls or i pass all urls and mobile-app can decide which one to use)
        + flare_user_id (number) - test
        + patient_id (number) - test
        + email (string) - test
        + number_of_records (number) -
        + end_date (string) - note: AS expects this format: '6/27/2017', please convert from our normal format: '2017-06-27'
        

    + Body

        
            {
                "jwt_token": "abc123...",
                "OS": "android",
                "locale": "en_US", 
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default",
                "device_id": "def124",
                "app_last_updated_date": "2017-05-01 23:00:00",
                "preferred_screen_density": "android_mdpi",
                "flare_user_id": 101,
                "patient_id": 101010101,
                "email": "test@hotmail.com",
                "number_of_records": 7,
                "end_date": "2017-06-27"
            }



+ Response 200 (application/json)
    + Attributes
        + request_status (RequestStatusObject)
        + cms_data (object)
            + study_info
                + study_id (number) - already in the 
                + project_code (string)
                + cms_study_id (number)
                + spectrum_graph_colors (array[SpectrumColorObject]) - hardcoded for now, we will make a CMS page later to collect this info which will build the spectrum graph dynamically
                + patient_profile_score
                    + patient_profile_score_formula (string)
                    + patient_profile_score_mapping (array[PatientProfileScoreMappingObject])
        + acurian_services_data (object) - we passalong data like below example, and INJECT THE AVATAR information for that day (or last avatar won since that day... because mobile team needs an avatar image to show)
        TODO research adding badges and avatars here on a per 'ultimate day' basis
        
    + Body
    
            {
                "request_status": {
                    "status": "success"
                },
                "cms_data": {
                        "study_id": 7176,
                        "project_code": "FLAREFUL",
                        "cms_study_id": 1,
                        "spectrum_graph_colors": [  
                           {
                              "index":0,
                              "color":"#800080",
                              "color_name":"Pink"
                           },
                           {  
                              "index":1,
                              "color":"#7433DC",
                              "color_name":"Purple"
                           },
                           {  
                              "index":2,
                              "color":"#0000FF",
                              "color_name":"Blue"
                           },
                           {  
                              "index":3,
                              "color":"#00BFFF",
                              "color_name":"Cyan"
                           },
                           {  
                              "index":4,
                              "color":"#00FF00",
                              "color_name":"Green"
                           },
                           {  
                              "index":5,
                              "color":"#FFFF00",
                              "color_name":"Yellow"
                           },
                           {  
                              "index":6,
                              "color":"#FF4F15",
                              "color_name":"Orange"
                           },
                           {  
                              "index":7,
                              "color":"#FF0000",
                              "color_name":"Red"
                           }
                        ],
                        
                        "patient_profile_score": {
                            "patient_profile_score_formula": "((((QS1+QS2+QS3)<=3) && (IN_FLARE == false)) ? 20 :(((QS1+QS2+QS3)>=4) && ((QS1+QS2+QS3)<6) &&(IN_FLARE == false)) ? 40 :(((QS1+QS2+QS3)>=6) && ((QS1+QS2+QS3)<8) &&(IN_FLARE == false)) ? 60 :(((QS1+QS2+QS3)>=8) && (IN_FLARE == false)) ? 80 : false)",
                            "patient_profile_score_mapping": [
                             {"score": 20, "desc": "orange", "color": "#FFA500", "translation_key": "spectrum_color_1"},
                             {"score": 40, "desc": "yellow", "color": "#FFFF00", "translation_key": "spectrum_color_2"},
                             {"score": 60, "desc": "green", "color": "#00FF00", "translation_key": "spectrum_color_3"},
                             {"score": 80, "desc": "blue", "color": "#0000FF", "translation_key": "spectrum_color_4"},
                            ],
                        },
                        
                },
                "acurian_services_data": {
                    apiResponse: {
                        FlareSurveyResponse: [
                            {
                                surveyResponsesId: 64,
                                patientId: 60937149,
                                emailID: null,
                                flareUserId: 276,
                                followUpStudyId: 7158,
                                isOffline: false,
                                scoreFormula: null,
                                scoreAltFormula: null,
                                logic: null,
                                submissionDate: "2017-06-15T07:54:32",
                                flareStatus: "NOT_INFLARE",
                                flareScore: 80,
                                flareScoreAltValue: "ORANGE",
                                user_reward_status: {
                                  avatar_status: {
                                    was_gained_on_another_day: true, //this could be set to true if offline, not sure if anyone implemented yet
                                    was_gained_on_another_day_date: '2017-01-01 12:34:45', //this could be set if offline
                                    gained_avatars: [{
                                      "avatar_id": 2,
                                      "avatar_name": "Cat",
                                      "order": 2,
                                      "pieces": [{
                                        "piece_name": "outline_w_piece_3",
                                        "true_index": 7,
                                        "index": 3.0,
                                      }]
                                    }]
                                  }
                                },
                                surveyAnswers: [
                                    {
                                        surveyAnsRespId: 150,
                                        qstnrElementUniqueCd: "QS3",
                                        qstnrGroupAttributeCd: "STUDYQUES",
                                        answerType: "IRADIO",
                                        value: "N",
                                        optionsList: null
                                    },
                                    {
                                        surveyAnsRespId: 149,
                                        qstnrElementUniqueCd: "QS2",
                                        qstnrGroupAttributeCd: "STUDYQUES",
                                        answerType: "TXTNUM",
                                        value: "4",
                                        optionsList: null
                                    },
                                    {
                                        surveyAnsRespId: 148,
                                        qstnrElementUniqueCd: "QS1",
                                        qstnrGroupAttributeCd: "STUDYQUES",
                                        answerType: "TXTNUM",
                                        value: "3",
                                        optionsList: null
                                    }
                                ]
                            },
                            {
                                "could_be_2nd_point_on_graph": "imagine similar AS data like above here"
                            },
                            {
                                "could_be_3rd_point_on_graph": "imagine similar AS data like above here"
                            }
                        ]
                    },
                    apiErrors: [
                        {
                            code: 200,
                            status: "Success",
                            message: "Success",
                            moreInfo: "Success",
                            httpStatus: "OK",
                            versionInfo: "Supported"
                        }
                    ]
                }
            }


## /getFlareSurveyQuestionInfo
### Get Flare Survey Question Info [POST]

After clicking on a score above, will need to provide localized question text and localized answer.

pull this data from the AS service: POST /getFlareSurveyQuestionInfo ( params: flare_user_id, questionCd: [ array of question codes], languagePref)
Note: AS Team may slightly modify above to be /getFlareSurveyQuestionInfoByUserDate (params: flare_user_id, maybe study_id, date, languagePref)

+ Request (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere
            JWT-Authorization: Bearer createdByCMSusedByMobileAppUntilExpiresAndNewOneThenIssuedAfterLogin

    + Attributes
        + jwt_token (string) - test
        + OS (string) - android or ios or (web)
        + locale (string) - test
        + fcm_token (string) - test
        + app_name (string) - test
        + app_version (string) - test
        + cms_version (string) - test
        + device_id (string) - test
        + app_last_updated_date (string) - test
        + preferred_screen_density - *** not sure if will be used yet *** android_mdpi, ios_1x, original (possibly for Badge and Avatar urls or i pass all urls and mobile-app can decide which one to use)
        + flare_user_id (number) - test
        + patient_id (number) - test
        + email (string) - test
        + date (string) - format '2017-01-31' but send up to AS in their format '01/31/2017 ('mm/dd/yyyy')
    
    + Body
    
    
    
+ Response 200 (application/json)

    + Attributes
        + request_status (RequestStatusObject)
        + cms_data (object) - empty
        + acurian_services_data - just passalong data like below example
 

    + Body


            {
                "request_status": {
                    "status": "success"
                },
                "cms_data": {},
                "acurian_services_data": {
                    {
                        apiResponse: {
                            FlareSurveyQnInfo: [
                                {
                                    questionCd: "Q0012577",
                                    questionText: "On an average day, how many total bowel movements do you have?",
                                    questionType: "TXTNUM",
                                    questionBgImageUrl: null,
                                    maxScaleValue: 0,
                                    blocker: false,
                                    viewType: "VIEW2",
                                    baseLine: false,
                                    alternateQuestionText: "On an average day, how many total bowel movements do you have?",
                                    questionnaireGroupAttributeCd: null,
                                    questionnaireElementUniqueCd: null,
                                    questionnaireRequiredInd: false,
                                    questionnaireElementOrderNum: 0,
                                    questionnaireElementId: 0,
                                    blockerLogic: null,
                                    optionsList: []
                                },
                                {
                                    questionCd: "Q0012623",
                                    questionText: "Over the past 24 hours, did you notice any blood in your stool, on toilet tissue, or in the toilet bowl?;",
                                    questionType: "IRADIO",
                                    questionBgImageUrl: null,
                                    maxScaleValue: 0,
                                    blocker: false,
                                    viewType: "VIEW1",
                                    baseLine: false,
                                    alternateQuestionText: "Over the past 24 hours, did you notice any blood in your stool, on toilet tissue, or in the toilet bowl?;",
                                    questionnaireGroupAttributeCd: null,
                                    questionnaireElementUniqueCd: null,
                                    questionnaireRequiredInd: false,
                                    questionnaireElementOrderNum: 0,
                                    questionnaireElementId: 0,
                                    blockerLogic: null,
                                    optionsList: [
                                        {
                                            optionId: "Y",
                                            optionText: "Yes",
                                            optionBgImageUrl: null,
                                            optionIndex: 1
                                        },
                                        {
                                            optionId: "N",
                                            optionText: "No",
                                            optionBgImageUrl: null,
                                            optionIndex: 2
                                        }
                                    ]
                                }
                            ]
                        },
                        apiErrors: [
                            {
                                code: 200,
                                status: "Success",
                                message: "Success",
                                moreInfo: "Success",
                                httpStatus: "OK",
                                versionInfo: "Supported"
                            }
                        ]
                    }
                }
            }



## /getNumberPatientsSameScoreStatus
### Get Number of patients who are in the score/color-status as the Flare User [POST]

pull this data from the AS service: POST /getNumberPatientsSameScoreStatus (params: flareUserId OR scoreNumValue, onDate) 
Note: we should now be just using the functionality where flareUserId is just needed since Mobile App team prefers to send up just this info.

+ Request (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere
            JWT-Authorization: Bearer createdByCMSusedByMobileAppUntilExpiresAndNewOneThenIssuedAfterLogin

    + Attributes
        + jwt_token (string) - test
        + OS (string) - android or ios or (web)
        + locale (string) - test
        + fcm_token (string) - test
        + app_name (string) - test
        + app_version (string) - test
        + cms_version (string) - test
        + device_id (string) - test
        + app_last_updated_date (string) - test
        + preferred_screen_density - *** not sure if will be used yet *** android_mdpi, ios_1x, original (possibly for Badge and Avatar urls or i pass all urls and mobile-app can decide which one to use)
        + flare_user_id (number) - really we only need something unique about patient to send up to AS for this WS
        + patient_id (number) - really we only need something unique about patient to send up to AS for this WS
        + email (string) - really we only need something unique about patient to send up to AS for this WS
        + date_time (string, optional) - do not use anymore. expect format like '2017-07-30 23:59:59', optonal since mobile team shouldnt supply anymore and we will use flare_user_id
        + score_number_value  (number, optional) - do not use anymore. one of these two are required, #1 (preferably this one)
        + score_mapping_value (string, optional) - do not use anymore. one of these two are required, #2
        

    + Body

        
            {
                "jwt_token": "abc123...",
                "OS": "android",
                "locale": "en_US", 
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default"
                "app_last_updated_date": "2017-05-01 23:00:00",
                "preferred_screen_density": "android_mdpi",
                "device_id": "def124",
                "flare_user_id": 101,
                "patient_id": 101010101,
                "email": "test@acurian.com"
            }

+ Response 200 (application/json)
    + Attributes
        + request_status (RequestStatusObject)
        + cms_data (object) - find the matching data in the Patient Profile Color Status mappings
            + score_number_value (number) - if the request passes up the score #, figure out the text below
            + score_mapping_value (string) - if the request passes up the mapped value, figure out the score above
            + score_color (string) - hex color defined in the color status page
            + translated_color (string) - get from their Translation Group, translate the key defined in the color status page
        + acurian_services_data - just passalong data like below example

    + Body
    
    
            {
                "request_status": {
                    "status": "success"
                },
                "cms_data": {
                    "score_number_value": 20,
                    "score_mapping_value": "Red",
                    "score_color": "#FF0000",
                    "translated_color": "Rojo"
                },
                "acurian_services_data": {
                    {
                        apiResponse: {
                            numOfUsersWithSameScore: 81,
                            scoreAltValue: "green",
                            scoreNumValue: 60
                        },
                        apiErrors: [
                            {
                                code: 200,
                                status: "Success",
                                message: "Success",
                                moreInfo: "Success",
                                httpStatus: "OK",
                                versionInfo: "Supported"
                            }
                        ]
                    }
                }
            }




## /getNumberOfFlareUsersScoreStatusForStudy
### Get Number of patients who are in the score/color-status as the Flare User and ALL users score/color-status counts too [POST]

pull this data from the AS service: POST /getNumberOfFlareUsersScoreStatusForStudy (params: flareUserId) 
Note: we should now be just using the functionality where flareUserId is just needed since Mobile App team prefers to send up just this info.

+ Request (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere
            JWT-Authorization: Bearer createdByCMSusedByMobileAppUntilExpiresAndNewOneThenIssuedAfterLogin

    + Attributes
        + jwt_token (string) - test
        + OS (string) - android or ios or (web)
        + locale (string) - test
        + fcm_token (string) - test
        + app_name (string) - test
        + app_version (string) - test
        + cms_version (string) - test
        + device_id (string) - test
        + app_last_updated_date (string) - test
        + preferred_screen_density - *** not sure if will be used yet *** android_mdpi, ios_1x, original (possibly for Badge and Avatar urls or i pass all urls and mobile-app can decide which one to use)
        + flare_user_id (number) - really we only need something unique about patient to send up to AS for this WS
        + patient_id (number) - really we only need something unique about patient to send up to AS for this WS
        + email (string) - really we only need something unique about patient to send up to AS for this WS
        
    + Body

        
            {
                "jwt_token": "abc123...",
                "OS": "android",
                "locale": "en_US", 
                "fcm_token": "abc123...",
                "app_name": "default_flare_app",
                "app_version": "v1",
                "cms_version": "default"
                "app_last_updated_date": "2017-05-01 23:00:00",
                "preferred_screen_density": "android_mdpi",
                "device_id": "def124",
                "flare_user_id": 101,
                "patient_id": 101010101,
                "email": "test@acurian.com"
            }

+ Response 200 (application/json)
    + Attributes
        + request_status (RequestStatusObject)
        + cms_data (object) - find the matching data in the Patient Profile Color Status mappings
            + patient_profile_score_mapping (array[PatientProfileScoreMappingObject])
        + acurian_services_data - just passalong data like below example

    + Body
    
            {
                cms_data: {                             
                    "patient_profile_score_mapping": [            
                        {"score": 20, "desc": "orange", "color": "#FFA500", "translation_key": "spectrum_color_1"},
                        {"score": 40, "desc": "yellow", "color": "#FFFF00", "translation_key": "spectrum_color_2"},
                        {"score": 60, "desc": "green", "color": "#00FF00", "translation_key": "spectrum_color_3"},
                        {"score": 80, "desc": "blue", "color": "#0000FF", "translation_key": "spectrum_color_4"},
                    ]
                },
                acurian_services_data: {
                    apiResponse: {
                        numOfFlrUsersScoreStatusForStudy: {
                            latestFlareScore: 20,
                            latestFlareScoreAltValue: "blue",
                            flareUsersScoreStatusList: [{
                                    scoreNumValue: -1,
                                    scoreMappedValue: null,
                                    scoreCount: 52
                                }, {
                                    scoreNumValue: 0,
                                    scoreMappedValue: null,
                                    scoreCount: 52
                                }, {
                                    scoreNumValue: 20,
                                    scoreMappedValue: "Ugh",
                                    scoreCount: 505
                                }, {
                                    scoreNumValue: 20,
                                    scoreMappedValue: "blue",
                                    scoreCount: 293
                                }, {
                                    scoreNumValue: 20,
                                    scoreMappedValue: "red",
                                    scoreCount: 2
                                }, {
                                    scoreNumValue: 40,
                                    scoreMappedValue: "green",
                                    scoreCount: 13
                                }, {
                                    scoreNumValue: 60,
                                    scoreMappedValue: "yellow",
                                    scoreCount: 39
                                }, {
                                    scoreNumValue: 80,
                                    scoreMappedValue: "orange",
                                    scoreCount: 13
                                }, {
                                    scoreNumValue: 90,
                                    scoreMappedValue: "red",
                                    scoreCount: 10
                                }
                            ]
                        }
                    },
                    apiErrors: [{
                            code: 200,
                            status: "Success",
                            message: "Success",
                            moreInfo: "Success",
                            httpStatus: "OK",
                            versionInfo: "Supported"
                        }
                    ]
                }
            }

# Group CMS apis for the CMS Admin GUI

## /getFlareMatchingStudies
### Get Flare Matching Studies [POST]

Note: should call /getFlareMatchingStudy/{partialProjectCode} AS service
This is for CMS's 'Add/Edit Study' area


+ Request 200 (application/json)

    + Attributes
        + partial_project_code (string) - test

    + Body
    
            {
                "test": true
            }
    
+ Response 200 (application/json)

        {
            "test": true
        }

## /importQuestions
### Import Questions [POST]

This is for CMS's 'Import Question' area. Already done, so url path may be different. Check with CMS Team.

+ Request 200 (application/json)

        {
            "test": true
        }
    
+ Response 200 (application/json)

        {
            "test": true
        }


# Group External 3rd Party Web Services

## /unflarePatient
### Unflare Patient [POST]

They have requested this WS not only just set the unflare_date_time in our streak table.
But also send up push notification so they don't have to call 2 web services from their app.
Header set to string like 'AS' so 'AS' sent up from Acurian Services to check against our external Basic Auth cms api users.

+ Request 200 (application/json)

    + Headers

            Authorization: Basic dynamicCMSApiUserPassGoesHere
            external-app-name:  AS
            
    + Attributes
        + flare_user_id (string, optional) -    one of these 3 required, #1
        + patient_id (string, optional) -       one of these 3 required, #2
        + email (string, optional) -            one of these 3 required, #3
        + unflare_date_time (string) -  date time the user got unflared, please use 'YYYY-MM-DD HH:MM:SS' format unless you have your own standardized format
        + message (string,optional) -                 one of these 2 required, #1 (this can be a backup in case no translation found for key below)
        + message_translation_key (string,optional) - one of these 2 required, #2 (possibly in future also get name of the Translation Group in this POST if want to have a easy-lookup message for array of patients, but for now make it smart to figure it out)
        + message_translation_group_id (number,optional) - if above is sent, need a translation group to use (note: AS Team requested to also be able to send the word 'default')
        + priority (string, optional) -    default value is "normal", have to research what options are available in firebase
        + theme_key_notification_image (string, optional) - if possible, have ability to attach an image from the CMS theme system (otherwise may need to serve a default notification image)
        + theme_key_resolution (string, optional) -         if possible force the resolution of image to send. Not sure if this is needed, maybe we default to 'ldpi' for all ios/android?

    + Body


            {
                "flare_user_id": 101,
                "message_translation_group_id": 'default',
                "message_translation_key": "unflare_message",
                "message": "The Doctor said you have not met the criteria yet for this study. Please start taking the mobile app questionnaire daily to try to get into this study.",
                "priority": "normal",
                "unflare_date_time": "2017-01-31 13:30:00"
            }

+ Response 200 (application/json)


    + Attributes
        + request_status (RequestStatusObject)

    + Body

            {
                "status": "success",
                "extra_info": "Unflared Patient and Push notification sent to fcm token $token"
            }

## /sendPushNotification
### Send Push Notifications [POST]

find locale of the patient + find the translation group of his study which help figure out which message to serve him.
Note: external-app-name should be passed via a HEADER so that CMS can figure out which Basic Auth to use for it.
Header set to string like 'AS' so 'AS' sent up from Acurian Services to check against our external Basic Auth cms api users.
Note: you can pass variables to use in manual or automated push notifications via these params placed in the 'messsage' or the 'message_translation_key's value: ${patient.firstname}, ${patient.lastname}, ${patient.fullname}, ${date.todays_date}

+ Request 200 (application/json)
    
    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere
            external-app-name:  AS
            
    + Attributes
        + flare_user_id (string, optional) -    one of these 3 required, #1
        + patient_id (string, optional) -       one of these 3 required, #2
        + email (string, optional) -            one of these 3 required, #3
        + message (string,optional) -                 one of these 2 required, #1 (this can be a backup in case no translation found for key below)
        + message_translation_key (string,optional) - one of these 2 required, #2 (possibly in future also get name of the Translation Group in this POST if want to have a easy-lookup message for array of patients, but for now make it smart to figure it out)
        + message_translation_group_id (number,optional) - if above is sent, need a translation group to use (note: AS Team requested to also be able to send the word 'default')
        + priority (string, optional) -    default value is "normal", have to research what options are available in firebase
        + theme_key_notification_image (string, optional) - if possible, have ability to attach an image from the CMS theme system (otherwise may need to serve a default notification image)
        + theme_key_resolution (string, optional) -         if possible force the resolution of image to send. Not sure if this is needed, maybe we default to 'ldpi' for all ios/android?

    + Body

            {
                "flare_user_id": 101,
                "message_translation_group_id": 2,
                "message_translation_key": "welcome_msg_to_app",
                "message": "Welcome to this app!... This is the default text in case above key is not found",
                "priority": "normal"
            }


+ Response 200 (application/json)

    + Attributes
        + request_status (RequestStatusObject)

    + Body

            {
              "request_status": {
                "status": "success"
              },
              "cms_data": {
                "push_notifications": [
                  {"device_id": 123, "fcm_token": "abc123",                                  "push_status": "Push notification sent to device" },
                  {"device_id": 124, "fcm_token": "abc456", "error": "someExceptionIssue?",  "push_status": "Push notification sent to device" },
                  {"device_id": 125, "fcm_token": "abc789",                                  "push_status": "Push notification sent to device" },
                ]
              },
              "acurian_services_data": {}
            }

+ Response 2000 (application/json)

    + Attributes
        + request_status (RequestStatusObject)

            {
              "request_status": {
                "status": "success"
              },
              "cms_data": {
                "push_notifications": [
                  {"device_id": 123, "fcm_token": "abc123",                                  "push_status": "Push notification sent to device" },
                  {"device_id": 124, "fcm_token": "abc456",  "error": "someExceptionIssue?", "push_status": "Push notification sent to device" },
                  {"device_id": 125, "fcm_token": "abc789",                                  "push_status": "Push notification sent to device" },
                ]
              },
              "acurian_services_data": {}
            }



## /sendPushNotificationBatch
### Send Push Notifications to list of patients - NOT NEEDED NOW BUT IN FUTURE MAY IMPLEMENT [POST]

optional if we have time, not sure anyone will use yet.


+ Request 200 (application/json)

    + Headers
    
            Authorization: Basic dynamicCMSApiUserPassGoesHere
            external-app-name:  AS

    + Attributes
        + flare_user_ids (string, optional)
        + message (string,optional) -                 one of these 2 required, #1 (this can be a backup in case no translation found for key below)
        + message_translation_key (string,optional) - one of these 2 required, #2 (possibly in future also get name of the Translation Group in this POST if want to have a easy-lookup message for array of patients, but for now make it smart to figure it out)
        + message_translation_group - instead of trying to figure out for each patient the heirarchical translation group, force one for the message_translation_key lookup
        + priority (string, optional) -    default value is "normal", have to research what options are available in firebase
        + theme_key_notification_image (string, optional) - if possible, have ability to attach an image from the CMS theme system (otherwise may need to serve a default notification image)
        + theme_key_resolution (string, optional) -         if possible force the resolution of image to send. Not sure if this is needed, maybe we default to 'ldpi' for all ios/android?

    + Body

            {
                "flare_user_ids": [101,102,104,107,110],
                "message_translation_group": "Push Notifications",
                "message_translation_key": "welcome_msg_to_app",
                "message": "Welcome to this app!... This is the default text in case above key is not found",
                "priority": "normal"
            }

+ Response 200 (application/json)

    + Attributes
        + request_status (RequestStatusObject)

    + Body

            {
                "status": "success",
                "extra_info": "Push notifications sent to batch"
            }


# Group Low Priority, probably not needed:


## /sendUserTracking
### send User Tracking - NOT NEEDED NOW BUT IN FUTURE MAY IMPLEMENT [POST]
event category button-click, screen-view... need to define these
event 1, id-of-button, name-of-screen-view
event 2, not sure

+ Request 200 (application/json)

        {
            "test": true
        }
    
+ Response 200 (application/json)

        {
            "test": true
        }


# Data Structures

## FlareResponse (object)
+ submission_order (number) - if offline, may have more than 1 offline answer to send up
+ submission_date (string) - date of submission
+ is_blocked_submission (boolean, optional) - optional as its only for /sendFlareResponse and not /updateProfileBaselineQuestions
+ answers (array[FlareQuestionAnswer]) - array of answers
+ flare_status (string,optional)           - note: what to do if blocked, remove? optional, since only offline submissions will have this info ... note: not used Baseline Question answers/responses (/updateProfileBaselineQuestions), only /sendFlareResponse's answers/responses
+ flare_score (number,optional)            - note: what to do if blocked, remove? optional, since only offline submissions will have this info ... note: not used Baseline Question answers/responses (/updateProfileBaselineQuestions), only /sendFlareResponse's answers/responses
+ flare_score_alt_value (string, optional) - note: what to do if blocked, remove? optional, since only offline submissions will have this info ... note: not used Baseline Question answers/responses (/updateProfileBaselineQuestions), only /sendFlareResponse's answers/responses

## FlareQuestionAnswer (object)
+ question_cd (string) - test
+ question_group_code (string) - usually STUDYQUES passed from mobile-app
+ question_type (string) - test
+ view_type (string) - test
+ answer_value (enum, nullable) - can be either a number key or string key (please ***ADD*** qoutes though if a number [this changed from before])
    - 3 (number)
    - 'C' (string)
+ answer_value_list (array, nullable) - can be either a number key or string key (please don't add qoutes if a number in the array list)
    - 3 (number)
    - 'C' (string)

## TranslationOrThemeKeyValueInsertOrUpdateObject
+ key (string)
+ value (string)
+ type (string)
+ os (string)
+ pre_login (string)
+ inserted_date (string, optional) - well one of these 2 dates are required, #1
+ updated_date (string, optional)  - well one of these 2 dates are required, #2

## TranslationOrThemeKeyValueDeleteObject
+ key (string)
+ deleted_date (string)

## AppMaterialOrStudyMaterialInsertOrUpdateObject 
+ app_material_id (number, optional)   - one of these 2 are required, #1
+ study_material_id (number, optional) - one of these 2 are required, #2
+ title - general title/description of file
+ type - internal_cms_file_resource or external_url_resource
+ file_url (string) - url to internal or external cms link
+ pre_download_resource (boolean) - true or false for mobile app to pre-download it
+ section_category (string) - which category to place the resource in

## AppMaterialOrStudyMaterialDeleteObject
+ study_material_id (string)
+ deleted_date (string)

## AvatarInsertOrUpdateObject
+ avatar_id (number)
+ avatar_name (string)
+ order (number)
+ translation_key_avatar_name (string) - optional
+ translation_key_avatar_awarded (string) - optional
+ translation_key_avatar_achieve_title (string) - optional
+ translation_key_avatar_achieve_body (string) - optional
+ pieces (array[AvatarPieceObject])

## AvatarPieceObject
+ piece_name
+ true_index
+ index
+ file_urls (array[AvatarOrBadgePieceFileUrlObject])

## AvatarOrBadgeDeleteObject
+ badge_id (number, optional)  - one of these 2 are required, #1
+ avatar_id (number, optional) - one of these 2 are required, #2
+ deleted_date (string)

## BadgeInsertOrUpdateObject
+ badge_id (number)
+ badge_name (string)
+ streak_days_to_win (number)
+ translation_key_badge_name (string) - could be empty
+ translation_key_badge_awarded (string) - optional
+ translation_key_badge_achieve_title (string) - optional
+ translation_key_badge_achieve_body (string) - optional
+ file_urls (array[AvatarOrBadgePieceFileUrlObject])


## AvatarOrBadgePieceFileUrlObject
+ avatar_image_id (number, optional) - one of these 2 are required, #1
+ badge_image_id (number, optional)  - one of these 2 are required, #2
+ screen_density
+ file_url


## RewardBadgeObject
+ badge_id (number)
+ badge_name (string)
+ streak_days_to_win (number)
+ won_counter (number)


## RewardAvatarObject
+ avatar_id  (number)
+ avatar_name (string)
+ order (number)
+ pieces (array[RewardAvatarPieceObject]) - changed from pieces_won

## RewardAvatarPieceObject
+ piece_name
+ index
+ true_index

## SpectrumColorObject
+ index (number) - implies an order to the mobile app
+ color (string) - hex value like '#FF0000'
+ color_name (string) - name/desc of the color

## PatientProfileScoreMappingObject
+ score (number)
+ desc (string)
+ color (string)
+ translation_key (string) - this will be a lookup to a translation color. like above color maybe 'Green' but we may have to return '

## QuestionColorImageMappingObject
+ question_code (string)
+ question_color_image_logic (array[QuestionColorImageLogicObject])

## QuestionColorImageLogicObject
+ question_color_image_logic_id (number)
+ javascript_formula (string)
+ background_color (object)
    + gradient_color_top (optional)    - either this set of 3 gradients or the 1 solid color are required, #1a
    + gradient_color_middle (optional) - either this set of 3 gradients or the 1 solid color are required, #1b
    + gradient_color_bottom (optional) - either this set of 3 gradients or the 1 solid color are required, #1c
    + solid_color (optional)           - either this set of 3 gradients or the 1 solid color are required, #2
+ text_color
+ file_urls (object)
    + screen_density
    + file_url

## CurrentStoredFlareLogicObj
+ logic_order_num (number)
+ comparison_text (string)

## RequestStatusObject
+ status (string) - usually 'success' but maybe 'error' ... if there is an error, this will say error, and include additional properties like these below 2 props
+ extra_info (optional) - eh , may helpful extra info even on success like "Push Notificatioon sent to fcm token $token"
+ errors (array[ErrorObject], optional) - array of errors

## ViewedMaterial
+ material_id (number) - test
+ material_type (string) - only possible values (app or study) 

## ErrorObject
+ error_source (string) - "cms_error" or "acurian_services_error"
+ error_code (string) - MobileApp team will check the translations for the code/key
+ error_message (string) - "non localised error message" ... in case no translation provided, default error
+ error_extra_info (string, optional) - extra info maybe for push notifications, would be good to know more info